EESchema Schematic File Version 4
LIBS:mppt-10a-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 3 4
Title "10A MPPT Charge Controller with USB"
Date "2018-08-23"
Rev "0.4"
Comp "Libre Solar"
Comment1 "Author: Martin JÃ¤ger"
Comment2 "Website: http://libre.solar"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:GND #PWR09
U 1 1 58A8D5E6
P 1800 6700
F 0 "#PWR09" H 1800 6450 50  0001 C CNN
F 1 "GND" H 1800 6550 50  0000 C CNN
F 2 "" H 1800 6700 50  0000 C CNN
F 3 "" H 1800 6700 50  0000 C CNN
	1    1800 6700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR010
U 1 1 58A8D6E3
P 2150 6700
F 0 "#PWR010" H 2150 6450 50  0001 C CNN
F 1 "GND" H 2150 6550 50  0000 C CNN
F 2 "" H 2150 6700 50  0000 C CNN
F 3 "" H 2150 6700 50  0000 C CNN
	1    2150 6700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR011
U 1 1 58A8D77B
P 2500 6700
F 0 "#PWR011" H 2500 6450 50  0001 C CNN
F 1 "GND" H 2500 6550 50  0000 C CNN
F 2 "" H 2500 6700 50  0000 C CNN
F 3 "" H 2500 6700 50  0000 C CNN
	1    2500 6700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR012
U 1 1 58A8D813
P 2850 6700
F 0 "#PWR012" H 2850 6450 50  0001 C CNN
F 1 "GND" H 2850 6550 50  0000 C CNN
F 2 "" H 2850 6700 50  0000 C CNN
F 3 "" H 2850 6700 50  0000 C CNN
	1    2850 6700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR013
U 1 1 5B07ACC9
P 1850 2200
F 0 "#PWR013" H 1850 1950 50  0001 C CNN
F 1 "GND" H 1850 2050 50  0000 C CNN
F 2 "" H 1850 2200 50  0000 C CNN
F 3 "" H 1850 2200 50  0000 C CNN
	1    1850 2200
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR014
U 1 1 58A8DF29
P 1800 6300
F 0 "#PWR014" H 1800 6150 50  0001 C CNN
F 1 "+3.3V" H 1800 6440 50  0000 C CNN
F 2 "" H 1800 6300 50  0000 C CNN
F 3 "" H 1800 6300 50  0000 C CNN
	1    1800 6300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR015
U 1 1 58A8E026
P 2150 6300
F 0 "#PWR015" H 2150 6150 50  0001 C CNN
F 1 "+3.3V" H 2150 6440 50  0000 C CNN
F 2 "" H 2150 6300 50  0000 C CNN
F 3 "" H 2150 6300 50  0000 C CNN
	1    2150 6300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR016
U 1 1 58A8E0BE
P 2500 6300
F 0 "#PWR016" H 2500 6150 50  0001 C CNN
F 1 "+3.3V" H 2500 6440 50  0000 C CNN
F 2 "" H 2500 6300 50  0000 C CNN
F 3 "" H 2500 6300 50  0000 C CNN
	1    2500 6300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR017
U 1 1 58A8E156
P 2850 6300
F 0 "#PWR017" H 2850 6150 50  0001 C CNN
F 1 "+3.3V" H 2850 6440 50  0000 C CNN
F 2 "" H 2850 6300 50  0000 C CNN
F 3 "" H 2850 6300 50  0000 C CNN
	1    2850 6300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR018
U 1 1 58A8F194
P 3000 5300
F 0 "#PWR018" H 3000 5050 50  0001 C CNN
F 1 "GND" H 3000 5150 50  0000 C CNN
F 2 "" H 3000 5300 50  0000 C CNN
F 3 "" H 3000 5300 50  0000 C CNN
	1    3000 5300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR024
U 1 1 5B07ACD2
P 3350 1800
F 0 "#PWR024" H 3350 1650 50  0001 C CNN
F 1 "+3.3V" H 3350 1940 50  0000 C CNN
F 2 "" H 3350 1800 50  0000 C CNN
F 3 "" H 3350 1800 50  0000 C CNN
	1    3350 1800
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR025
U 1 1 58A94885
P 1400 1700
F 0 "#PWR025" H 1400 1550 50  0001 C CNN
F 1 "+3.3V" H 1400 1840 50  0000 C CNN
F 2 "" H 1400 1700 50  0000 C CNN
F 3 "" H 1400 1700 50  0000 C CNN
	1    1400 1700
	1    0    0    -1  
$EndComp
$Comp
L Project:L L4
U 1 1 58A97504
P 1600 1800
F 0 "L4" H 1600 1870 50  0000 C CNN
F 1 "600R" H 1600 1750 50  0000 C CNN
F 2 "Inductor_SMD:L_0603_1608Metric" V 1600 1800 50  0001 C CNN
F 3 "" V 1600 1800 50  0000 C CNN
F 4 "Murata" H -350 600 50  0001 C CNN "Manufacturer"
F 5 "BLM18AG601SN1D" H -350 600 50  0001 C CNN "PartNumber"
	1    1600 1800
	1    0    0    -1  
$EndComp
$Comp
L Project:C C30
U 1 1 58AB8568
P 1800 6500
F 0 "C30" H 1820 6570 50  0000 L CNN
F 1 "100n" H 1820 6430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1800 6500 50  0001 C CNN
F 3 "" H 1800 6500 50  0000 C CNN
F 4 "Yageo" H 400 1000 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 400 1000 50  0001 C CNN "PartNumber"
	1    1800 6500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C31
U 1 1 58AB8BE5
P 2150 6500
F 0 "C31" H 2170 6570 50  0000 L CNN
F 1 "100n" H 2170 6430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2150 6500 50  0001 C CNN
F 3 "" H 2150 6500 50  0000 C CNN
F 4 "Yageo" H 400 1000 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 400 1000 50  0001 C CNN "PartNumber"
	1    2150 6500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C32
U 1 1 58AB8D4F
P 2500 6500
F 0 "C32" H 2520 6570 50  0000 L CNN
F 1 "100n" H 2520 6430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2500 6500 50  0001 C CNN
F 3 "" H 2500 6500 50  0000 C CNN
F 4 "Yageo" H 400 1000 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 400 1000 50  0001 C CNN "PartNumber"
	1    2500 6500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C34
U 1 1 58AB8FDB
P 1850 2000
F 0 "C34" H 1875 2075 50  0000 L CNN
F 1 "100n" H 1875 1925 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1850 2000 50  0001 C CNN
F 3 "" H 1850 2000 50  0000 C CNN
F 4 "Yageo" H -350 600 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H -350 600 50  0001 C CNN "PartNumber"
	1    1850 2000
	1    0    0    -1  
$EndComp
$Comp
L Project:C C33
U 1 1 58AB9291
P 2850 6500
F 0 "C33" H 2870 6570 50  0000 L CNN
F 1 "2.2u" H 2870 6430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2850 6500 50  0001 C CNN
F 3 "" H 2850 6500 50  0000 C CNN
F 4 "Murata" H 400 1000 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H 400 1000 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H -3200 1700 60  0001 C CNN "Remarks"
	1    2850 6500
	1    0    0    -1  
$EndComp
$Comp
L Project:D_LED LED2
U 1 1 5B07ACDD
P 9300 5200
AR Path="/5B07ACDD" Ref="LED2"  Part="1" 
AR Path="/58A68DCB/5B07ACDD" Ref="LED4"  Part="1" 
F 0 "LED4" H 9425 5250 50  0000 L CNN
F 1 "green" H 9425 5150 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 9300 5200 50  0001 C CNN
F 3 "" V 9300 5200 50  0000 C CNN
F 4 "Lite-On" H 9300 5200 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KGKT" H 9300 5200 60  0001 C CNN "PartNumber"
	1    9300 5200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR030
U 1 1 5B07ACE0
P 4200 6700
F 0 "#PWR030" H 4200 6450 50  0001 C CNN
F 1 "GND" H 4200 6550 50  0000 C CNN
F 2 "" H 4200 6700 50  0000 C CNN
F 3 "" H 4200 6700 50  0000 C CNN
	1    4200 6700
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR031
U 1 1 58C2A17E
P 4200 6400
F 0 "#PWR031" H 4200 6250 50  0001 C CNN
F 1 "+3.3V" H 4200 6540 50  0000 C CNN
F 2 "" H 4200 6400 50  0000 C CNN
F 3 "" H 4200 6400 50  0000 C CNN
	1    4200 6400
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG032
U 1 1 58BFF095
P 2000 1700
F 0 "#FLG032" H 2000 1775 50  0001 C CNN
F 1 "PWR_FLAG" H 2000 1850 50  0000 C CNN
F 2 "" H 2000 1700 50  0001 C CNN
F 3 "" H 2000 1700 50  0001 C CNN
	1    2000 1700
	1    0    0    -1  
$EndComp
Text Notes 8900 4050 0    100  ~ 0
Status LEDs
Text Notes 2800 1250 0    100  ~ 0
MCU STM32L072
Text Notes 3900 5900 0    100  ~ 0
STM Nucleo SWD and USART
Text Label 4000 4500 2    50   ~ 0
LED_SOLAR
Text Label 4000 4400 2    50   ~ 0
LED_LOAD
Text Label 1700 4300 0    50   ~ 0
USART1_TX
Text Label 1700 4400 0    50   ~ 0
USART1_RX
Text Label 1700 4700 0    50   ~ 0
SWDIO
Text Label 1700 4800 0    50   ~ 0
SWCLK
Text Label 3900 2500 2    50   ~ 0
BOOT0
Text Label 3900 2700 2    50   ~ 0
OSC_IN
Text Label 3900 2800 2    50   ~ 0
OSC_OUT
Text Label 3900 2300 2    50   ~ 0
~RESET
Text Label 4300 6900 0    50   ~ 0
SWDIO
Text Label 4300 6800 0    50   ~ 0
SWCLK
Text Label 5600 6600 2    50   ~ 0
USART1_TX
Text Label 5600 6500 2    50   ~ 0
USART1_RX
Text Label 4300 6700 0    50   ~ 0
~RESET
Text Label 7900 4000 3    50   ~ 0
LED_SOC_12
Text Label 9300 4300 3    50   ~ 0
LED_SOLAR
Wire Wire Line
	3350 1800 3350 1900
Wire Wire Line
	2150 6300 2150 6400
Wire Wire Line
	1800 6300 1800 6400
Wire Wire Line
	2500 6300 2500 6400
Wire Wire Line
	2850 6400 2850 6300
Wire Wire Line
	3500 2500 3900 2500
Wire Wire Line
	2150 6700 2150 6600
Wire Wire Line
	1800 6700 1800 6600
Wire Wire Line
	2500 6600 2500 6700
Wire Wire Line
	1850 2100 1850 2200
Wire Wire Line
	2850 6600 2850 6700
Wire Wire Line
	3500 4000 4000 4000
Wire Wire Line
	3500 4100 4000 4100
Wire Wire Line
	3500 4400 4000 4400
Wire Wire Line
	3500 4500 4000 4500
Wire Wire Line
	3500 3500 4100 3500
Wire Wire Line
	3500 3400 4100 3400
Wire Wire Line
	3500 4800 4000 4800
Wire Wire Line
	9300 4800 9300 4300
Wire Wire Line
	2200 3800 1600 3800
Wire Wire Line
	3500 3800 4000 3800
Wire Wire Line
	3500 3900 4000 3900
Wire Wire Line
	3500 3700 4000 3700
Wire Wire Line
	2200 4800 1700 4800
Wire Wire Line
	2200 4700 1700 4700
Wire Wire Line
	2200 4400 1700 4400
Wire Wire Line
	2200 4300 1700 4300
Wire Wire Line
	2200 3700 1700 3700
Wire Wire Line
	2200 3600 1700 3600
Wire Wire Line
	2200 4500 1600 4500
Wire Wire Line
	2200 4600 1600 4600
Wire Wire Line
	3500 3600 4000 3600
Wire Wire Line
	5600 6600 5100 6600
Wire Wire Line
	5600 6500 5100 6500
Wire Wire Line
	1700 1800 1850 1800
Wire Wire Line
	1850 1800 1850 1900
Wire Wire Line
	1400 1800 1500 1800
Wire Wire Line
	1400 1800 1400 1700
Wire Wire Line
	2000 1700 2000 1800
Wire Wire Line
	4600 6800 4300 6800
Wire Wire Line
	4600 6900 4300 6900
Wire Wire Line
	4600 6700 4300 6700
Connection ~ 1850 1800
Connection ~ 2000 1800
Wire Wire Line
	9300 5000 9300 5100
Wire Wire Line
	8600 5300 8600 5400
Wire Wire Line
	9300 5300 9300 5400
Text Notes 5100 7600 0    50   ~ 0
If not stated otherwise, all MLCC 50V X7R
Wire Wire Line
	1850 1800 2000 1800
$Comp
L power:+3.3V #PWR0101
U 1 1 5AE4F2FA
P 6900 2000
F 0 "#PWR0101" H 6900 1850 50  0001 C CNN
F 1 "+3.3V" H 6900 2140 50  0000 C CNN
F 2 "" H 6900 2000 50  0000 C CNN
F 3 "" H 6900 2000 50  0000 C CNN
	1    6900 2000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0102
U 1 1 5AE4F300
P 8600 2300
F 0 "#PWR0102" H 8600 2050 50  0001 C CNN
F 1 "GND" H 8600 2150 50  0000 C CNN
F 2 "" H 8600 2300 50  0000 C CNN
F 3 "" H 8600 2300 50  0000 C CNN
	1    8600 2300
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR0103
U 1 1 5AE4F306
P 9700 2000
F 0 "#PWR0103" H 9700 1850 50  0001 C CNN
F 1 "+3.3V" H 9700 2140 50  0000 C CNN
F 2 "" H 9700 2000 50  0000 C CNN
F 3 "" H 9700 2000 50  0000 C CNN
	1    9700 2000
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR0104
U 1 1 5AE4F30C
P 9350 2000
F 0 "#PWR0104" H 9350 1850 50  0001 C CNN
F 1 "+3.3V" H 9350 2140 50  0000 C CNN
F 2 "" H 9350 2000 50  0000 C CNN
F 3 "" H 9350 2000 50  0000 C CNN
	1    9350 2000
	1    0    0    -1  
$EndComp
$Comp
L Project:R R30
U 1 1 5AE4F314
P 9700 2200
F 0 "R30" V 9630 2200 50  0000 C CNN
F 1 "2.2k" V 9770 2200 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 9700 2200 50  0001 C CNN
F 3 "" H 9700 2200 50  0000 C CNN
F 4 "Yageo" H 4550 -3150 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 4550 -3150 50  0001 C CNN "PartNumber"
	1    9700 2200
	1    0    0    1   
$EndComp
$Comp
L Project:R R5
U 1 1 5AE4F31D
P 9350 2200
F 0 "R5" V 9280 2200 50  0000 C CNN
F 1 "2.2k" V 9420 2200 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 9350 2200 50  0001 C CNN
F 3 "" H 9350 2200 50  0000 C CNN
F 4 "Yageo" H 4550 -3150 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 4550 -3150 50  0001 C CNN "PartNumber"
	1    9350 2200
	1    0    0    1   
$EndComp
$Comp
L Project:UEXT J4
U 1 1 5AE4F324
P 7500 2400
F 0 "J4" H 7250 2750 50  0000 L CNN
F 1 "UEXT" H 7750 2750 50  0000 R CNN
F 2 "LibreSolar:Box_Header_2x05x2.54mm_Straight" H 7500 1800 50  0001 C CIN
F 3 "" H 7500 2400 60  0000 C CNN
	1    7500 2400
	1    0    0    -1  
$EndComp
Text Notes 7300 1600 0    100  ~ 0
UEXT connector
Text Notes 9050 1600 0    100  ~ 0
I2C pull-ups
Wire Wire Line
	9350 2100 9350 2000
Wire Wire Line
	9700 2100 9700 2000
Wire Wire Line
	7900 2200 8600 2200
Wire Wire Line
	8600 2200 8600 2300
Wire Wire Line
	9700 2750 9700 2300
Wire Wire Line
	7100 2300 6650 2300
Wire Wire Line
	7100 2400 6650 2400
Wire Wire Line
	7100 2500 6650 2500
Wire Wire Line
	7100 2600 6650 2600
Wire Wire Line
	7900 2300 8350 2300
Wire Wire Line
	7900 2400 8350 2400
Wire Wire Line
	7900 2500 8350 2500
Wire Wire Line
	7900 2600 8350 2600
Wire Wire Line
	9350 2300 9350 2750
Wire Wire Line
	6900 2200 7100 2200
Wire Wire Line
	6900 2200 6900 2000
Text Label 4000 4100 2    50   ~ 0
I2C1_SDA
Text Label 4000 4000 2    50   ~ 0
I2C1_SCL
Text Label 4000 3900 2    50   ~ 0
SPI1_MOSI
Text Label 4000 3800 2    50   ~ 0
SPI1_MISO
Text Label 4000 3700 2    50   ~ 0
SPI1_SCK
Text Label 1700 3600 0    50   ~ 0
USART2_TX
Text Label 1700 3700 0    50   ~ 0
USART2_RX
Text Label 1700 4900 0    50   ~ 0
SSEL
Text Label 8350 2500 2    50   ~ 0
SPI1_MOSI
Text Label 8350 2600 2    50   ~ 0
SSEL
Text Label 8350 2400 2    50   ~ 0
I2C1_SDA
Text Label 8350 2300 2    50   ~ 0
USART2_RX
Text Label 6650 2300 0    50   ~ 0
USART2_TX
Text Label 6650 2400 0    50   ~ 0
I2C1_SCL
Text Label 6650 2500 0    50   ~ 0
SPI1_MISO
Text Label 6650 2600 0    50   ~ 0
SPI1_SCK
Text Label 9350 2750 1    50   ~ 0
I2C1_SDA
Text Label 9700 2750 1    50   ~ 0
I2C1_SCL
Wire Wire Line
	2200 4900 1700 4900
$Comp
L Project:D_LED LED5
U 1 1 5B184898
P 9900 5200
F 0 "LED5" H 10025 5250 50  0000 L CNN
F 1 "green" H 10025 5150 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 9900 5200 50  0001 C CNN
F 3 "" V 9900 5200 50  0000 C CNN
F 4 "Lite-On" H 9900 5200 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KGKT" H 9900 5200 60  0001 C CNN "PartNumber"
	1    9900 5200
	1    0    0    -1  
$EndComp
Text Label 9900 4300 3    50   ~ 0
LED_LOAD
Wire Wire Line
	9900 4800 9900 4300
Wire Wire Line
	9900 5000 9900 5100
Wire Wire Line
	9900 5300 9900 5400
Text Label 4000 3600 2    50   ~ 0
LED_SOC_3
Wire Wire Line
	3500 4600 4100 4600
Wire Wire Line
	3500 3000 3600 3000
$Comp
L Project:C C39
U 1 1 5B40A2C8
P 4100 2500
F 0 "C39" H 4125 2575 50  0000 L CNN
F 1 "100n" H 4125 2425 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 4100 2500 50  0001 C CNN
F 3 "" H 4100 2500 50  0000 C CNN
F 4 "Yageo" H 1900 1100 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 1900 1100 50  0001 C CNN "PartNumber"
	1    4100 2500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0120
U 1 1 5B40A383
P 4100 2700
F 0 "#PWR0120" H 4100 2450 50  0001 C CNN
F 1 "GND" H 4100 2550 50  0000 C CNN
F 2 "" H 4100 2700 50  0000 C CNN
F 3 "" H 4100 2700 50  0000 C CNN
	1    4100 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	4100 2600 4100 2700
Text Notes 3650 2100 0    50   ~ 0
MCU contains internal\npull-up at NRST pin
$Comp
L Project:R_Array_4 R36
U 1 1 5B4506A6
P 7900 4700
F 0 "R36" H 7959 4746 50  0000 L CNN
F 1 "680" H 7959 4655 50  0000 L CNN
F 2 "LibreSolar:R_Array_Convex_4x0603" H 7900 4700 50  0001 C CNN
F 3 "" H 7900 4700 50  0001 C CNN
F 4 "Yageo" H 7900 4700 50  0001 C CNN "Manufacturer"
F 5 "TC164-JR-07680RL" H 7900 4700 50  0001 C CNN "PartNumber"
F 6 "Alternative: Panasonic EXB-38V681JV" H 400 0   50  0001 C CNN "Remarks"
	1    7900 4700
	-1   0    0    -1  
$EndComp
$Comp
L Project:R_Array_4 R36
U 2 1 5B4508AA
P 8600 4700
F 0 "R36" H 8659 4746 50  0000 L CNN
F 1 "680" H 8659 4655 50  0000 L CNN
F 2 "LibreSolar:R_Array_Convex_4x0603" H 8600 4700 50  0001 C CNN
F 3 "" H 8600 4700 50  0001 C CNN
F 4 "Alternative: Panasonic EXB-38V471JV" H 400 0   50  0001 C CNN "Remarks"
	2    8600 4700
	1    0    0    -1  
$EndComp
$Comp
L Project:R_Array_4 R36
U 3 1 5B450929
P 9300 4900
F 0 "R36" H 9359 4946 50  0000 L CNN
F 1 "680" H 9359 4855 50  0000 L CNN
F 2 "LibreSolar:R_Array_Convex_4x0603" H 9300 4900 50  0001 C CNN
F 3 "" H 9300 4900 50  0001 C CNN
F 4 "Alternative: Panasonic EXB-38V471JV" H 400 0   50  0001 C CNN "Remarks"
	3    9300 4900
	1    0    0    -1  
$EndComp
Text GLabel 1600 3800 0    50   Output ~ 0
DAC
Text GLabel 4100 3400 2    50   Output ~ 0
PWM_HS
Text GLabel 1600 4500 0    50   BiDi ~ 0
USB_DM
Text GLabel 1600 4600 0    50   BiDi ~ 0
USB_DP
Text GLabel 1600 3500 0    50   Input ~ 0
V_SOLAR
Text GLabel 1600 3400 0    50   Input ~ 0
V_BAT
Text GLabel 1600 3900 0    50   Input ~ 0
T_MOSFETS
Text GLabel 4100 3500 2    50   Output ~ 0
PWM_LS
$Comp
L MCU_ST_STM32L0:STM32L072CZTx U2
U 1 1 5B4AF7AB
P 2800 3600
F 0 "U2" H 3200 2150 50  0000 C CNN
F 1 "STM32L072CZT6" H 2200 2150 50  0000 C CNN
F 2 "Package_QFP:LQFP-48_7x7mm_P0.5mm" H 2200 2200 50  0001 R CNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00090510.pdf" H 2800 3600 50  0001 C CNN
F 4 "ST Microelectronics" H 200 0   50  0001 C CNN "Manufacturer"
F 5 "STM32L072CZT6" H 200 0   50  0001 C CNN "PartNumber"
F 6 "Alternative: STM32L073CZT6" H 2800 3600 50  0001 C CNN "Remarks"
	1    2800 3600
	-1   0    0    -1  
$EndComp
Text GLabel 3600 3000 2    50   Output ~ 0
LOAD_EN
Text GLabel 1600 4000 0    50   Input ~ 0
I_LOAD
Text GLabel 1600 4100 0    50   Input ~ 0
I_DCDC
Text GLabel 4100 4600 2    50   Output ~ 0
USB_PWR_EN
Wire Wire Line
	2700 5100 2700 5200
Wire Wire Line
	2700 5200 2800 5200
Wire Wire Line
	3000 5200 3000 5300
Wire Wire Line
	3000 5100 3000 5200
Connection ~ 3000 5200
Wire Wire Line
	2800 5100 2800 5200
Connection ~ 2800 5200
Wire Wire Line
	2800 5200 2900 5200
Wire Wire Line
	2900 5100 2900 5200
Connection ~ 2900 5200
Wire Wire Line
	2900 5200 3000 5200
Wire Wire Line
	2600 2100 2600 2000
Wire Wire Line
	2600 2000 2800 2000
Wire Wire Line
	3000 2000 3000 2100
Wire Wire Line
	2900 2100 2900 2000
Connection ~ 2900 2000
Wire Wire Line
	2900 2000 3000 2000
Wire Wire Line
	2800 2100 2800 2000
Connection ~ 2800 2000
Wire Wire Line
	2800 2000 2900 2000
Wire Wire Line
	2700 2100 2700 1800
Wire Wire Line
	2000 1800 2700 1800
Wire Wire Line
	3350 1900 3000 1900
Wire Wire Line
	3000 1900 3000 2000
Connection ~ 3000 2000
Wire Wire Line
	4100 2300 4100 2400
Wire Wire Line
	3500 2800 3900 2800
Wire Wire Line
	3900 2700 3500 2700
Wire Wire Line
	3500 2300 4100 2300
Wire Wire Line
	3500 4200 4000 4200
Text Label 4000 4200 2    50   ~ 0
CAN_RX
Wire Wire Line
	3500 4300 4000 4300
Text Label 4000 4300 2    50   ~ 0
CAN_TX
Wire Wire Line
	1600 3400 2200 3400
Wire Wire Line
	2200 3500 1600 3500
Text Notes 4200 3800 0    50   ~ 0
LED1 controlled by LPTIM1_OUT\nin stop mode: only PB2 possible
Wire Wire Line
	2200 3900 1600 3900
NoConn ~ 3500 3100
NoConn ~ 3500 3200
Wire Wire Line
	2200 4000 1600 4000
Wire Wire Line
	1600 4100 2200 4100
Text Label 4000 4800 2    50   ~ 0
LED_GND
Wire Wire Line
	9900 5400 9300 5400
Wire Wire Line
	9300 5400 8600 5400
Connection ~ 9300 5400
Wire Wire Line
	8600 5400 8100 5400
Connection ~ 8600 5400
Text Label 7100 5400 0    50   ~ 0
LED_GND
$Comp
L Project:R_Array_4 R36
U 4 1 5B600C5A
P 9900 4900
F 0 "R36" H 9959 4946 50  0000 L CNN
F 1 "680" H 9959 4855 50  0000 L CNN
F 2 "LibreSolar:R_Array_Convex_4x0603" H 9900 4900 50  0001 C CNN
F 3 "" H 9900 4900 50  0001 C CNN
F 4 "Alternative: Panasonic EXB-38V471JV" H 400 0   50  0001 C CNN "Remarks"
	4    9900 4900
	1    0    0    -1  
$EndComp
Wire Wire Line
	8600 4600 8600 4000
Wire Wire Line
	7900 4600 7900 4000
Wire Wire Line
	7700 5300 7700 5400
$Comp
L Project:D_LED LED1
U 1 1 5B6AEAEC
P 7700 5200
F 0 "LED1" H 7825 5250 50  0000 L CNN
F 1 "red" H 7825 5150 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 7700 5200 50  0001 C CNN
F 3 "" V 7700 5200 50  0000 C CNN
F 4 "Lite-On" H 7700 5200 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KRKT" H 7700 5200 60  0001 C CNN "PartNumber"
	1    7700 5200
	1    0    0    1   
$EndComp
$Comp
L Project:D_LED LED3
U 1 1 5B6AEB66
P 8600 5200
F 0 "LED3" H 8725 5250 50  0000 L CNN
F 1 "red" H 8725 5150 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 8600 5200 50  0001 C CNN
F 3 "" V 8600 5200 50  0000 C CNN
F 4 "Lite-On" H 8600 5200 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KRKT" H 8600 5200 60  0001 C CNN "PartNumber"
	1    8600 5200
	1    0    0    -1  
$EndComp
Text Notes 6750 4950 0    50   ~ 0
SOC LEDs\n1: <100%\n2: <80%\n3: <20%
$Comp
L Project:D_LED LED2
U 1 1 5B6B9B63
P 8100 5200
F 0 "LED2" H 8225 5250 50  0000 L CNN
F 1 "red" H 8225 5150 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 8100 5200 50  0001 C CNN
F 3 "" V 8100 5200 50  0000 C CNN
F 4 "Lite-On" H 8100 5200 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KRKT" H 8100 5200 60  0001 C CNN "PartNumber"
	1    8100 5200
	1    0    0    -1  
$EndComp
Text Label 8600 4000 3    50   ~ 0
LED_SOC_3
Wire Wire Line
	8100 5300 8100 5400
Connection ~ 8100 5400
Wire Wire Line
	8100 5400 7700 5400
Wire Wire Line
	7700 5100 7700 5000
Wire Wire Line
	7700 5000 7900 5000
Wire Wire Line
	8100 5000 8100 5100
Wire Wire Line
	7900 4800 7900 5000
Connection ~ 7900 5000
Wire Wire Line
	7900 5000 8100 5000
Wire Wire Line
	8600 4800 8600 5100
Wire Wire Line
	3500 4700 4000 4700
Text Label 4000 4700 2    50   ~ 0
LED_SOC_12
$Comp
L Connector_Generic:Conn_02x05_Odd_Even J8
U 1 1 5B810EC0
P 4800 6700
F 0 "J8" H 4850 7117 50  0000 C CNN
F 1 "Conn_02x05_Odd_Even" H 4850 7026 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_2x05_P2.54mm_Vertical" H 4800 6700 50  0001 C CNN
F 3 "~" H 4800 6700 50  0001 C CNN
	1    4800 6700
	1    0    0    -1  
$EndComp
Wire Wire Line
	4600 6500 4200 6500
Wire Wire Line
	4200 6500 4200 6400
Wire Wire Line
	4600 6600 4200 6600
Wire Wire Line
	4200 6600 4200 6700
NoConn ~ 3500 4900
$Comp
L Project:R R7
U 1 1 5BA04FBA
P 4800 2500
F 0 "R7" V 4730 2500 50  0000 C CNN
F 1 "2.2k" V 4870 2500 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 4800 2500 50  0001 C CNN
F 3 "" H 4800 2500 50  0000 C CNN
F 4 "Yageo" H 0   -2850 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 0   -2850 50  0001 C CNN "PartNumber"
	1    4800 2500
	-1   0    0    -1  
$EndComp
$Comp
L power:GND #PWR04
U 1 1 5BA050D5
P 4800 2700
F 0 "#PWR04" H 4800 2450 50  0001 C CNN
F 1 "GND" H 4800 2550 50  0000 C CNN
F 2 "" H 4800 2700 50  0000 C CNN
F 3 "" H 4800 2700 50  0000 C CNN
	1    4800 2700
	1    0    0    -1  
$EndComp
Text Label 4800 2100 3    50   ~ 0
BOOT0
Wire Wire Line
	4800 2400 4800 2100
Wire Wire Line
	4800 2600 4800 2700
Connection ~ 7700 5400
Text Notes 6750 4400 0    50   ~ 0
All LEDs switched via\nPWM to reduce power\nconsumption
Text Label 5600 6900 2    50   ~ 0
BOOT0
Wire Wire Line
	5100 6900 5600 6900
Wire Wire Line
	7100 5400 7700 5400
Text Notes 7350 5900 0    50   ~ 0
Maximum power per GPIO pin of STM32L0: 16 mA\nLED_GND sinks max. 4 LEDs at the same time\nCurrent per LED: (3.3-1.5)/680 = 2.65A
NoConn ~ 2200 4200
$EndSCHEMATC
