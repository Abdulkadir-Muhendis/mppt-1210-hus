EESchema Schematic File Version 4
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 3 5
Title "10A MPPT Charge Controller with USB"
Date "2018-05-14"
Rev "0.2"
Comp "Open Energy Hardware Association"
Comment1 "Author: Martin JÃ¤ger"
Comment2 "Website: http://libre.solar"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:GND #PWR09
U 1 1 58A8D5E6
P 5000 5000
F 0 "#PWR09" H 5000 4750 50  0001 C CNN
F 1 "GND" H 5000 4850 50  0000 C CNN
F 2 "" H 5000 5000 50  0000 C CNN
F 3 "" H 5000 5000 50  0000 C CNN
	1    5000 5000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR010
U 1 1 58A8D6E3
P 5350 5000
F 0 "#PWR010" H 5350 4750 50  0001 C CNN
F 1 "GND" H 5350 4850 50  0000 C CNN
F 2 "" H 5350 5000 50  0000 C CNN
F 3 "" H 5350 5000 50  0000 C CNN
	1    5350 5000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR011
U 1 1 58A8D77B
P 5700 5000
F 0 "#PWR011" H 5700 4750 50  0001 C CNN
F 1 "GND" H 5700 4850 50  0000 C CNN
F 2 "" H 5700 5000 50  0000 C CNN
F 3 "" H 5700 5000 50  0000 C CNN
	1    5700 5000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR012
U 1 1 58A8D813
P 6050 5000
F 0 "#PWR012" H 6050 4750 50  0001 C CNN
F 1 "GND" H 6050 4850 50  0000 C CNN
F 2 "" H 6050 5000 50  0000 C CNN
F 3 "" H 6050 5000 50  0000 C CNN
	1    6050 5000
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR013
U 1 1 5B07ACC9
P 1450 2100
F 0 "#PWR013" H 1450 1850 50  0001 C CNN
F 1 "GND" H 1450 1950 50  0000 C CNN
F 2 "" H 1450 2100 50  0000 C CNN
F 3 "" H 1450 2100 50  0000 C CNN
	1    1450 2100
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR014
U 1 1 58A8DF29
P 5000 4600
F 0 "#PWR014" H 5000 4450 50  0001 C CNN
F 1 "+3.3V" H 5000 4740 50  0000 C CNN
F 2 "" H 5000 4600 50  0000 C CNN
F 3 "" H 5000 4600 50  0000 C CNN
	1    5000 4600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR015
U 1 1 58A8E026
P 5350 4600
F 0 "#PWR015" H 5350 4450 50  0001 C CNN
F 1 "+3.3V" H 5350 4740 50  0000 C CNN
F 2 "" H 5350 4600 50  0000 C CNN
F 3 "" H 5350 4600 50  0000 C CNN
	1    5350 4600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR016
U 1 1 58A8E0BE
P 5700 4600
F 0 "#PWR016" H 5700 4450 50  0001 C CNN
F 1 "+3.3V" H 5700 4740 50  0000 C CNN
F 2 "" H 5700 4600 50  0000 C CNN
F 3 "" H 5700 4600 50  0000 C CNN
	1    5700 4600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR017
U 1 1 58A8E156
P 6050 4600
F 0 "#PWR017" H 6050 4450 50  0001 C CNN
F 1 "+3.3V" H 6050 4740 50  0000 C CNN
F 2 "" H 6050 4600 50  0000 C CNN
F 3 "" H 6050 4600 50  0000 C CNN
	1    6050 4600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR018
U 1 1 58A8F194
P 2100 4900
F 0 "#PWR018" H 2100 4650 50  0001 C CNN
F 1 "GND" H 2100 4750 50  0000 C CNN
F 2 "" H 2100 4900 50  0000 C CNN
F 3 "" H 2100 4900 50  0000 C CNN
	1    2100 4900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR019
U 1 1 58A8F584
P 5450 1950
F 0 "#PWR019" H 5450 1700 50  0001 C CNN
F 1 "GND" H 5450 1800 50  0000 C CNN
F 2 "" H 5450 1950 50  0000 C CNN
F 3 "" H 5450 1950 50  0000 C CNN
	1    5450 1950
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR022
U 1 1 5B07ACD0
P 6150 3600
F 0 "#PWR022" H 6150 3350 50  0001 C CNN
F 1 "GND" H 6150 3450 50  0000 C CNN
F 2 "" H 6150 3600 50  0000 C CNN
F 3 "" H 6150 3600 50  0000 C CNN
	1    6150 3600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR023
U 1 1 5B07ACD1
P 5550 3600
F 0 "#PWR023" H 5550 3350 50  0001 C CNN
F 1 "GND" H 5550 3450 50  0000 C CNN
F 2 "" H 5550 3600 50  0000 C CNN
F 3 "" H 5550 3600 50  0000 C CNN
	1    5550 3600
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR024
U 1 1 5B07ACD2
P 1950 2000
F 0 "#PWR024" H 1950 1850 50  0001 C CNN
F 1 "+3.3V" H 1950 2140 50  0000 C CNN
F 2 "" H 1950 2000 50  0000 C CNN
F 3 "" H 1950 2000 50  0000 C CNN
	1    1950 2000
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR025
U 1 1 58A94885
P 1000 1600
F 0 "#PWR025" H 1000 1450 50  0001 C CNN
F 1 "+3.3V" H 1000 1740 50  0000 C CNN
F 2 "" H 1000 1600 50  0000 C CNN
F 3 "" H 1000 1600 50  0000 C CNN
	1    1000 1600
	1    0    0    -1  
$EndComp
$Comp
L Project:L L4
U 1 1 58A97504
P 1200 1700
F 0 "L4" H 1200 1770 50  0000 C CNN
F 1 "600R" H 1200 1650 50  0000 C CNN
F 2 "Inductor_SMD:L_0603_1608Metric" V 1200 1700 50  0001 C CNN
F 3 "" V 1200 1700 50  0000 C CNN
F 4 "Murata" H -750 500 50  0001 C CNN "Manufacturer"
F 5 "BLM18AG601SN1D" H -750 500 50  0001 C CNN "PartNumber"
	1    1200 1700
	1    0    0    -1  
$EndComp
$Comp
L Project:C C30
U 1 1 58AB8568
P 5000 4800
F 0 "C30" H 5020 4870 50  0000 L CNN
F 1 "100n" H 5020 4730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5000 4800 50  0001 C CNN
F 3 "" H 5000 4800 50  0000 C CNN
F 4 "Yageo" H 3600 -700 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 3600 -700 50  0001 C CNN "PartNumber"
	1    5000 4800
	1    0    0    -1  
$EndComp
$Comp
L Project:C C31
U 1 1 58AB8BE5
P 5350 4800
F 0 "C31" H 5370 4870 50  0000 L CNN
F 1 "100n" H 5370 4730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5350 4800 50  0001 C CNN
F 3 "" H 5350 4800 50  0000 C CNN
F 4 "Yageo" H 3600 -700 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 3600 -700 50  0001 C CNN "PartNumber"
	1    5350 4800
	1    0    0    -1  
$EndComp
$Comp
L Project:C C32
U 1 1 58AB8D4F
P 5700 4800
F 0 "C32" H 5720 4870 50  0000 L CNN
F 1 "100n" H 5720 4730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5700 4800 50  0001 C CNN
F 3 "" H 5700 4800 50  0000 C CNN
F 4 "Yageo" H 3600 -700 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 3600 -700 50  0001 C CNN "PartNumber"
	1    5700 4800
	1    0    0    -1  
$EndComp
$Comp
L Project:C C34
U 1 1 58AB8FDB
P 1450 1900
F 0 "C34" H 1475 1975 50  0000 L CNN
F 1 "100n" H 1475 1825 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 1450 1900 50  0001 C CNN
F 3 "" H 1450 1900 50  0000 C CNN
F 4 "Yageo" H -750 500 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H -750 500 50  0001 C CNN "PartNumber"
	1    1450 1900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C33
U 1 1 58AB9291
P 6050 4800
F 0 "C33" H 6070 4870 50  0000 L CNN
F 1 "2.2u" H 6070 4730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 6050 4800 50  0001 C CNN
F 3 "" H 6050 4800 50  0000 C CNN
F 4 "Murata" H 3600 -700 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H 3600 -700 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H 0   0   60  0001 C CNN "Remarks"
	1    6050 4800
	1    0    0    -1  
$EndComp
$Comp
L Project:R R42
U 1 1 5B07ACDA
P 5550 3100
F 0 "R42" V 5475 3100 50  0000 C CNN
F 1 "470" V 5625 3100 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 5550 3100 50  0001 C CNN
F 3 "" H 5550 3100 50  0000 C CNN
F 4 "Yageo" H -3950 -1800 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07470RL" H -3950 -1800 50  0001 C CNN "PartNumber"
	1    5550 3100
	1    0    0    1   
$EndComp
$Comp
L Project:R R43
U 1 1 5B07ACDB
P 6150 3100
F 0 "R43" V 6080 3100 50  0000 C CNN
F 1 "470" V 6220 3100 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 6150 3100 50  0001 C CNN
F 3 "" H 6150 3100 50  0000 C CNN
F 4 "Yageo" H -4150 -1800 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07470RL" H -4150 -1800 50  0001 C CNN "PartNumber"
	1    6150 3100
	1    0    0    1   
$EndComp
$Comp
L Project:D_LED LED2
U 1 1 5B07ACDD
P 6150 3400
AR Path="/5B07ACDD" Ref="LED2"  Part="1" 
AR Path="/58A68DCB/5B07ACDD" Ref="LED2"  Part="1" 
F 0 "LED2" H 6275 3450 50  0000 L CNN
F 1 "LED_green" H 6275 3350 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 6150 3400 50  0001 C CNN
F 3 "" V 6150 3400 50  0000 C CNN
F 4 "Lite-On" H 6150 3400 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190GKT" H 6150 3400 60  0001 C CNN "PartNumber"
	1    6150 3400
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR030
U 1 1 5B07ACE0
P 4100 6800
F 0 "#PWR030" H 4100 6550 50  0001 C CNN
F 1 "GND" H 4100 6650 50  0000 C CNN
F 2 "" H 4100 6800 50  0000 C CNN
F 3 "" H 4100 6800 50  0000 C CNN
	1    4100 6800
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR031
U 1 1 58C2A17E
P 4100 6450
F 0 "#PWR031" H 4100 6300 50  0001 C CNN
F 1 "+3.3V" H 4100 6590 50  0000 C CNN
F 2 "" H 4100 6450 50  0000 C CNN
F 3 "" H 4100 6450 50  0000 C CNN
	1    4100 6450
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG032
U 1 1 58BFF095
P 1600 1600
F 0 "#FLG032" H 1600 1675 50  0001 C CNN
F 1 "PWR_FLAG" H 1600 1750 50  0000 C CNN
F 2 "" H 1600 1600 50  0001 C CNN
F 3 "" H 1600 1600 50  0001 C CNN
	1    1600 1600
	1    0    0    -1  
$EndComp
$Comp
L Project:ST_Nucleo_SWD SWD1
U 1 1 58C4B6A9
P 4800 6750
F 0 "SWD1" H 4600 7150 50  0000 L CNN
F 1 "ST_Nucleo_SWD" H 4600 6350 50  0000 L CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x06_P2.54mm_Vertical" H 4800 6150 30  0001 C CIN
F 3 "" H 4950 6800 60  0001 C CNN
	1    4800 6750
	1    0    0    -1  
$EndComp
$Comp
L Connector_Generic:Conn_01x02 P1
U 1 1 58C4C05C
P 6100 6700
F 0 "P1" H 6100 6850 50  0000 C CNN
F 1 "CONN_01X02" V 6200 6700 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 6100 6700 50  0001 C CNN
F 3 "" H 6100 6700 50  0001 C CNN
	1    6100 6700
	1    0    0    -1  
$EndComp
$Comp
L Project:D_LED LED1
U 1 1 58AE0EA3
P 5550 3400
AR Path="/58AE0EA3" Ref="LED1"  Part="1" 
AR Path="/58A68DCB/58AE0EA3" Ref="LED1"  Part="1" 
F 0 "LED1" H 5675 3450 50  0000 L CNN
F 1 "LED_red" H 5675 3350 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 5550 3400 50  0001 C CNN
F 3 "" V 5550 3400 50  0000 C CNN
F 4 "Lite-On" H 5550 3400 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190KRKT" H 5550 3400 60  0001 C CNN "PartNumber"
F 6 "red" H 5550 3400 60  0001 C CNN "Remarks"
	1    5550 3400
	1    0    0    -1  
$EndComp
Text Notes 5750 2550 0    100  ~ 0
Status LEDs
Text Notes 2600 1300 0    100  ~ 0
MCU STM32F072
Text Notes 3800 5900 0    100  ~ 0
STM Nucleo SWD and USART
Text Label 4400 4100 2    50   ~ 0
LED1
Text Label 4400 4200 2    50   ~ 0
LED2
Text HLabel 4500 4000 2    50   Output ~ 0
TIM1_CH1N
Text HLabel 1700 3600 0    50   Output ~ 0
TIM1_CH1
Text Label 1800 3700 0    50   ~ 0
USART1_TX
Text Label 1800 3800 0    50   ~ 0
USART1_RX
Text Label 1800 4100 0    50   ~ 0
SWDIO
Text Label 1800 4200 0    50   ~ 0
SWCLK
Text HLabel 1700 3400 0    50   Input ~ 0
V_BAT
Text HLabel 1700 3500 0    50   Input ~ 0
V_SOLAR
Text Label 1800 2700 0    50   ~ 0
BOOT0
Text Label 1800 3300 0    50   ~ 0
V_REF
Text Label 1800 2600 0    50   ~ 0
OSC_IN
Text Label 4400 2000 2    50   ~ 0
OSC_OUT
Text Label 4400 2400 2    50   ~ 0
~RESET
Text Label 5350 1150 3    50   ~ 0
OSC_IN
Text Label 5550 1150 3    50   ~ 0
OSC_OUT
Text Label 4200 6800 0    50   ~ 0
SWDIO
Text Label 4200 6600 0    50   ~ 0
SWCLK
Text Label 5400 6700 0    50   ~ 0
USART1_TX
Text Label 5400 6800 0    50   ~ 0
USART1_RX
Text Label 4200 6900 0    50   ~ 0
~RESET
Text HLabel 4500 2900 2    50   Output ~ 0
~LOAD_EN
Text Label 5550 2700 3    50   ~ 0
LED1
Text Label 6150 2700 3    50   ~ 0
LED2
Text HLabel 4500 2700 2    50   Input ~ 0
I_LOAD
Text HLabel 4500 2800 2    50   Input ~ 0
I_DCDC
Text HLabel 1700 3900 0    50   BiDi ~ 0
USB_DM
Text HLabel 1700 4000 0    50   BiDi ~ 0
USB_DP
Text HLabel 1700 3200 0    50   Output ~ 0
DAC
Text HLabel 1700 2900 0    50   Input ~ 0
TEMP_INT
Text Label 4400 3700 2    50   ~ 0
I2C2_SCL
Text Label 4400 3800 2    50   ~ 0
I2C2_SDA
Text HLabel 4500 2500 2    50   Input ~ 0
TEMP_BAT
NoConn ~ 4500 7000
Wire Wire Line
	2200 2100 1950 2100
Wire Wire Line
	1950 2000 1950 2100
Wire Wire Line
	1950 2200 2200 2200
Wire Wire Line
	1950 2300 2200 2300
Wire Wire Line
	1950 2400 2200 2400
Wire Wire Line
	5350 4600 5350 4700
Wire Wire Line
	5000 4600 5000 4700
Wire Wire Line
	5700 4600 5700 4700
Wire Wire Line
	6050 4700 6050 4600
Wire Wire Line
	2200 2700 1800 2700
Wire Wire Line
	5350 5000 5350 4900
Wire Wire Line
	2200 4600 2100 4600
Wire Wire Line
	2100 4500 2100 4600
Wire Wire Line
	2200 4500 2100 4500
Wire Wire Line
	5000 5000 5000 4900
Wire Wire Line
	5700 4900 5700 5000
Wire Wire Line
	1450 2000 1450 2100
Wire Wire Line
	6050 4900 6050 5000
Wire Wire Line
	4000 3300 4500 3300
Wire Wire Line
	4000 3400 4500 3400
Wire Wire Line
	4000 3700 4400 3700
Wire Wire Line
	4000 3800 4400 3800
Wire Wire Line
	4000 2800 4500 2800
Wire Wire Line
	4000 2700 4500 2700
Wire Wire Line
	5550 3000 5550 2700
Wire Wire Line
	4000 4100 4400 4100
Wire Wire Line
	6150 3000 6150 2700
Wire Wire Line
	4000 4200 4400 4200
Wire Wire Line
	2200 2600 1800 2600
Wire Wire Line
	4000 2000 4400 2000
Wire Wire Line
	2200 3200 1700 3200
Wire Wire Line
	4000 3100 4500 3100
Wire Wire Line
	4000 3200 4500 3200
Wire Wire Line
	4000 3000 4500 3000
Wire Wire Line
	4000 2500 4500 2500
Wire Wire Line
	2200 4200 1800 4200
Wire Wire Line
	2200 4100 1800 4100
Wire Wire Line
	2200 2900 1700 2900
Wire Wire Line
	2200 3600 1700 3600
Wire Wire Line
	4000 4000 4500 4000
Wire Wire Line
	2200 3800 1800 3800
Wire Wire Line
	2200 3700 1800 3700
Wire Wire Line
	2200 3100 1700 3100
Wire Wire Line
	2200 3000 1700 3000
Wire Wire Line
	2200 3900 1700 3900
Wire Wire Line
	2200 4000 1700 4000
Wire Wire Line
	2200 3400 1700 3400
Wire Wire Line
	2200 3300 1800 3300
Wire Wire Line
	2200 3500 1700 3500
Wire Wire Line
	4000 2900 4500 2900
Wire Wire Line
	4000 2400 4400 2400
Wire Wire Line
	5350 1150 5350 1550
Wire Wire Line
	5550 1550 5550 1150
Wire Wire Line
	5400 6700 5900 6700
Wire Wire Line
	5400 6800 5900 6800
Wire Wire Line
	4100 6500 4500 6500
Wire Wire Line
	4100 6450 4100 6500
Wire Wire Line
	1300 1700 1450 1700
Wire Wire Line
	1450 1700 1450 1800
Wire Wire Line
	2100 1700 2100 2000
Wire Wire Line
	1000 1700 1100 1700
Wire Wire Line
	1000 1700 1000 1600
Wire Wire Line
	2200 4700 2100 4700
Wire Wire Line
	2200 4800 2100 4800
Wire Wire Line
	2100 2000 2200 2000
Wire Wire Line
	1600 1600 1600 1700
Wire Wire Line
	4500 6600 4200 6600
Wire Wire Line
	4500 6800 4200 6800
Wire Wire Line
	4500 6900 4200 6900
Wire Wire Line
	4500 6700 4100 6700
Wire Wire Line
	4100 6700 4100 6800
Connection ~ 1950 2100
Connection ~ 1950 2200
Connection ~ 1950 2300
Connection ~ 2100 4700
Connection ~ 2100 4800
Connection ~ 2100 4600
Connection ~ 1450 1700
Connection ~ 1600 1700
Wire Wire Line
	6150 3200 6150 3300
Wire Wire Line
	5550 3500 5550 3600
Wire Wire Line
	5550 3200 5550 3300
$Comp
L Device:Resonator_Small Y1
U 1 1 58C556C6
P 5450 1650
F 0 "Y1" H 5575 1725 50  0000 L CNN
F 1 "8MHz" H 5575 1650 50  0000 L CNN
F 2 "LibreSolar:Resonator_Murata_CSTCE_G" H 5425 1650 50  0001 C CNN
F 3 "" H 5425 1650 50  0001 C CNN
F 4 "Murata" H 350 -2700 50  0001 C CNN "Manufacturer"
F 5 "CSTCE8M00GH5L99-R0" H 350 -2700 50  0001 C CNN "PartNumber"
F 6 "0.07% tolerance" H 350 250 60  0001 C CNN "Remarks"
	1    5450 1650
	1    0    0    -1  
$EndComp
Wire Wire Line
	5450 1850 5450 1950
Text Notes 5825 1925 0    50   ~ 0
Tight tolerance\nfor CAN interface
$Comp
L Project:24AA01 U6
U 1 1 5929D79A
P 2300 6800
F 0 "U6" H 2300 7165 50  0000 C CNN
F 1 "24AA01" H 2300 7074 50  0000 C CNN
F 2 "LibreSolar:SOT-23-5" H 2300 6400 50  0001 C CNN
F 3 "" H 2300 7050 60  0000 C CNN
F 4 "Microchip" H 2300 7300 60  0001 C CNN "Manufacturer"
F 5 "24AA32AFT-I/OT" H 2300 7200 60  0001 C CNN "PartNumber"
	1    2300 6800
	1    0    0    -1  
$EndComp
Text Notes 1900 5900 0    100  ~ 0
EEPROM
$Comp
L power:GND #PWR033
U 1 1 5B07ACE6
P 3000 7100
F 0 "#PWR033" H 3000 6850 50  0001 C CNN
F 1 "GND" H 3000 6950 50  0000 C CNN
F 2 "" H 3000 7100 50  0000 C CNN
F 3 "" H 3000 7100 50  0000 C CNN
	1    3000 7100
	1    0    0    -1  
$EndComp
$Comp
L Project:C C22
U 1 1 5929DAC6
P 3000 6800
F 0 "C22" H 3020 6870 50  0000 L CNN
F 1 "100n" H 3020 6730 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 3000 6800 50  0001 C CNN
F 3 "" H 3000 6800 50  0000 C CNN
F 4 "Yageo" H 1600 1300 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 1600 1300 50  0001 C CNN "PartNumber"
	1    3000 6800
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR034
U 1 1 5B07ACE8
P 3000 6500
F 0 "#PWR034" H 3000 6350 50  0001 C CNN
F 1 "+3.3V" H 3000 6640 50  0000 C CNN
F 2 "" H 3000 6500 50  0000 C CNN
F 3 "" H 3000 6500 50  0000 C CNN
	1    3000 6500
	1    0    0    -1  
$EndComp
Wire Wire Line
	2700 6900 2800 6900
Wire Wire Line
	2800 6800 2800 6900
Wire Wire Line
	2800 7000 3000 7000
Wire Wire Line
	3000 6900 3000 7000
Connection ~ 3000 7000
Wire Wire Line
	2700 6800 2800 6800
Connection ~ 2800 6900
Wire Wire Line
	2700 6700 2800 6700
Wire Wire Line
	2800 6700 2800 6600
Wire Wire Line
	2800 6600 3000 6600
Wire Wire Line
	3000 6500 3000 6600
Connection ~ 3000 6600
Wire Wire Line
	1000 6700 1500 6700
Wire Wire Line
	1000 6800 1800 6800
Text Label 1000 6700 0    50   ~ 0
I2C2_SCL
Text Label 1000 6800 0    50   ~ 0
I2C2_SDA
$Comp
L Project:R R32
U 1 1 5B07ACE9
P 1800 6500
F 0 "R32" V 1730 6500 50  0000 C CNN
F 1 "2.2k" V 1870 6500 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 1800 6500 50  0001 C CNN
F 3 "" H 1800 6500 50  0000 C CNN
F 4 "Yageo" H -5500 1625 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H -5500 1625 50  0001 C CNN "PartNumber"
	1    1800 6500
	1    0    0    1   
$EndComp
$Comp
L Project:R R31
U 1 1 5B07ACEA
P 1500 6500
F 0 "R31" V 1430 6500 50  0000 C CNN
F 1 "2.2k" V 1570 6500 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 1500 6500 50  0001 C CNN
F 3 "" H 1500 6500 50  0000 C CNN
F 4 "Yageo" H -5800 1625 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H -5800 1625 50  0001 C CNN "PartNumber"
	1    1500 6500
	1    0    0    1   
$EndComp
$Comp
L power:+3.3V #PWR035
U 1 1 5B07ACEB
P 1500 6200
F 0 "#PWR035" H 1500 6050 50  0001 C CNN
F 1 "+3.3V" H 1500 6340 50  0000 C CNN
F 2 "" H 1500 6200 50  0000 C CNN
F 3 "" H 1500 6200 50  0000 C CNN
	1    1500 6200
	1    0    0    -1  
$EndComp
Wire Wire Line
	1500 6200 1500 6300
Wire Wire Line
	1500 6300 1800 6300
Wire Wire Line
	1800 6300 1800 6400
Connection ~ 1500 6300
Wire Wire Line
	1500 6600 1500 6700
Connection ~ 1500 6700
Wire Wire Line
	1800 6600 1800 6800
Connection ~ 1800 6800
Wire Wire Line
	6150 3500 6150 3600
Text Notes 5100 7600 0    50   ~ 0
If not stated otherwise, all MLCC 50V X7R
Wire Wire Line
	1950 2100 1950 2200
Wire Wire Line
	1950 2200 1950 2300
Wire Wire Line
	1950 2300 1950 2400
Wire Wire Line
	2100 4700 2100 4800
Wire Wire Line
	2100 4800 2100 4900
Wire Wire Line
	2100 4600 2100 4700
Wire Wire Line
	1450 1700 1600 1700
Wire Wire Line
	1600 1700 2100 1700
Wire Wire Line
	3000 7000 3000 7100
Wire Wire Line
	2800 6900 2800 7000
Wire Wire Line
	3000 6600 3000 6700
Wire Wire Line
	1500 6300 1500 6400
Wire Wire Line
	1500 6700 1900 6700
Wire Wire Line
	1800 6800 1900 6800
$Comp
L power:+3.3V #PWR0101
U 1 1 5AE4F2FA
P 7750 1750
F 0 "#PWR0101" H 7750 1600 50  0001 C CNN
F 1 "+3.3V" H 7750 1890 50  0000 C CNN
F 2 "" H 7750 1750 50  0000 C CNN
F 3 "" H 7750 1750 50  0000 C CNN
	1    7750 1750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0102
U 1 1 5AE4F300
P 9450 2050
F 0 "#PWR0102" H 9450 1800 50  0001 C CNN
F 1 "GND" H 9450 1900 50  0000 C CNN
F 2 "" H 9450 2050 50  0000 C CNN
F 3 "" H 9450 2050 50  0000 C CNN
	1    9450 2050
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR0103
U 1 1 5AE4F306
P 10550 1750
F 0 "#PWR0103" H 10550 1600 50  0001 C CNN
F 1 "+3.3V" H 10550 1890 50  0000 C CNN
F 2 "" H 10550 1750 50  0000 C CNN
F 3 "" H 10550 1750 50  0000 C CNN
	1    10550 1750
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR0104
U 1 1 5AE4F30C
P 10200 1750
F 0 "#PWR0104" H 10200 1600 50  0001 C CNN
F 1 "+3.3V" H 10200 1890 50  0000 C CNN
F 2 "" H 10200 1750 50  0000 C CNN
F 3 "" H 10200 1750 50  0000 C CNN
	1    10200 1750
	1    0    0    -1  
$EndComp
$Comp
L Project:R R30
U 1 1 5AE4F314
P 10550 1950
F 0 "R30" V 10480 1950 50  0000 C CNN
F 1 "2.2k" V 10620 1950 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 10550 1950 50  0001 C CNN
F 3 "" H 10550 1950 50  0000 C CNN
F 4 "Yageo" H 5400 -3400 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 5400 -3400 50  0001 C CNN "PartNumber"
	1    10550 1950
	1    0    0    1   
$EndComp
$Comp
L Project:R R5
U 1 1 5AE4F31D
P 10200 1950
F 0 "R5" V 10130 1950 50  0000 C CNN
F 1 "2.2k" V 10270 1950 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 10200 1950 50  0001 C CNN
F 3 "" H 10200 1950 50  0000 C CNN
F 4 "Yageo" H 5400 -3400 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H 5400 -3400 50  0001 C CNN "PartNumber"
	1    10200 1950
	1    0    0    1   
$EndComp
$Comp
L Project:UEXT J4
U 1 1 5AE4F324
P 8350 2150
F 0 "J4" H 8100 2500 50  0000 L CNN
F 1 "UEXT" H 8600 2500 50  0000 R CNN
F 2 "LibreSolar:Box_Header_2x05x2.54mm_Straight" H 8350 1550 50  0001 C CIN
F 3 "" H 8350 2150 60  0000 C CNN
	1    8350 2150
	1    0    0    -1  
$EndComp
Text Notes 8150 1350 0    100  ~ 0
UEXT connector
Text Notes 9900 1350 0    100  ~ 0
I2C pull-ups
Wire Wire Line
	10200 1850 10200 1750
Wire Wire Line
	10550 1850 10550 1750
Wire Wire Line
	8750 1950 9450 1950
Wire Wire Line
	9450 1950 9450 2050
Wire Wire Line
	10550 2500 10550 2050
Wire Wire Line
	7950 2050 7500 2050
Wire Wire Line
	7950 2150 7500 2150
Wire Wire Line
	7950 2250 7500 2250
Wire Wire Line
	7950 2350 7500 2350
Wire Wire Line
	8750 2050 9200 2050
Wire Wire Line
	8750 2150 9200 2150
Wire Wire Line
	8750 2250 9200 2250
Wire Wire Line
	8750 2350 9200 2350
Wire Wire Line
	10200 2050 10200 2500
Wire Wire Line
	7750 1950 7950 1950
Wire Wire Line
	7750 1950 7750 1750
Text Label 4500 3400 2    50   ~ 0
I2C1_SDA
Text Label 4500 3300 2    50   ~ 0
I2C1_SCL
Text Label 4500 3200 2    50   ~ 0
SPI1_MOSI
Text Label 4500 3100 2    50   ~ 0
SPI1_MISO
Text Label 4500 3000 2    50   ~ 0
SPI1_SCK
NoConn ~ 4000 3500
NoConn ~ 4000 3600
NoConn ~ 4000 2300
Text Label 1700 3000 0    50   ~ 0
USART2_TX
Text Label 1700 3100 0    50   ~ 0
USART2_RX
Text Label 1800 4300 0    50   ~ 0
SSEL
Text Label 9200 2250 2    50   ~ 0
SPI1_MOSI
Text Label 9200 2350 2    50   ~ 0
SSEL
Text Label 9200 2150 2    50   ~ 0
I2C1_SDA
Text Label 9200 2050 2    50   ~ 0
USART2_RX
Text Label 7500 2050 0    50   ~ 0
USART2_TX
Text Label 7500 2150 0    50   ~ 0
I2C1_SCL
Text Label 7500 2250 0    50   ~ 0
SPI1_MISO
Text Label 7500 2350 0    50   ~ 0
SPI1_SCK
$Comp
L Project:STM32F072CB U2
U 1 1 58BDEE38
P 3100 3400
F 0 "U2" H 3100 4950 50  0000 C CNN
F 1 "STM32F072CB" H 3100 1850 50  0000 C CNN
F 2 "Package_QFP:LQFP-48_7x7mm_P0.5mm" H 3200 3100 50  0001 R TNN
F 3 "" H 3100 3400 50  0001 C CNN
F 4 "STMicroelectronics" H -300 250 50  0001 C CNN "Manufacturer"
F 5 "STM32F072CBT6" H -300 250 50  0001 C CNN "PartNumber"
	1    3100 3400
	1    0    0    -1  
$EndComp
Text Label 10200 2500 1    50   ~ 0
I2C1_SDA
Text Label 10550 2500 1    50   ~ 0
I2C1_SCL
Wire Notes Line
	6650 6000 10950 6000
Wire Notes Line
	10950 6000 10950 3450
Wire Notes Line
	10950 3450 7550 3450
Wire Notes Line
	6650 4150 6650 6000
Text Notes 8750 3400 0    50   ~ 0
Preliminary (for testing PCBs only)
$Comp
L power:+3.3V #PWR05
U 1 1 5B07AE20
P 8600 4200
F 0 "#PWR05" H 8600 4050 50  0001 C CNN
F 1 "+3.3V" H 8600 4340 50  0000 C CNN
F 2 "" H 8600 4200 50  0000 C CNN
F 3 "" H 8600 4200 50  0000 C CNN
	1    8600 4200
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR06
U 1 1 5B07ADDB
P 7600 4500
F 0 "#PWR06" H 7600 4350 50  0001 C CNN
F 1 "+3.3V" H 7600 4640 50  0000 C CNN
F 2 "" H 7600 4500 50  0000 C CNN
F 3 "" H 7600 4500 50  0000 C CNN
	1    7600 4500
	1    0    0    -1  
$EndComp
Wire Notes Line
	7550 4150 6650 4150
Wire Notes Line
	7550 3450 7550 4150
Wire Wire Line
	7600 4900 7900 4900
Wire Wire Line
	9200 4600 9500 4600
Wire Wire Line
	8600 4600 8600 4700
Text Notes 9600 5700 0    50   ~ 0
Equations:\ntau = R39 * C36 = 2.2 s\nV(t) = Vmax * (1-exp(-t/tau))\n--> t = -tau * ln(1-V/Vmax)\n\nNormal startup:\nBOOT0 < 0.69 V\nPress SW1 < 0.51 s\n\nUSB bootloader:\nBOOT0 > 1.61 V\nPress SW1 > 1.47 s
Wire Wire Line
	7600 4600 7600 4500
Wire Wire Line
	7600 4900 7600 5050
Wire Wire Line
	7600 4800 7600 4900
Connection ~ 7600 4900
Wire Wire Line
	7900 5200 8000 5200
Wire Wire Line
	7900 4900 7900 5200
Wire Wire Line
	7600 5450 7600 5500
Wire Wire Line
	7200 4900 7600 4900
Wire Wire Line
	7200 4900 7200 5100
Wire Wire Line
	8600 4900 8600 5000
Wire Wire Line
	8200 5200 8300 5200
Wire Wire Line
	7200 5300 7200 5500
Wire Wire Line
	9200 4600 9200 4900
Connection ~ 9200 4600
Wire Wire Line
	8600 4600 9200 4600
Connection ~ 8600 4600
Wire Wire Line
	8600 4500 8600 4600
Text Label 9500 4600 2    50   ~ 0
BOOT0
Text Label 7250 4900 0    50   ~ 0
~RESET
Text Notes 8450 3800 0    100  ~ 0
Reset and boot circuit
$Comp
L Switch:SW_Push SW2
U 1 1 5B05A3CE
P 7600 5250
F 0 "SW2" H 7600 5200 50  0000 C CNN
F 1 "SW_PUSH" H 7600 5120 50  0001 C CNN
F 2 "LibreSolar:SW_SPST_6mm" H 7500 5100 50  0001 C CNN
F 3 "" H 7600 5250 50  0000 C CNN
F 4 "C&K" H 7600 5250 50  0001 C CNN "Manufacturer"
F 5 "PTS645SM43SMTR92LFS" H 7600 5250 50  0001 C CNN "PartNumber"
	1    7600 5250
	0    1    1    0   
$EndComp
$Comp
L Project:C C39
U 1 1 5B05A3C5
P 9200 5000
F 0 "C39" H 9220 5070 50  0000 L CNN
F 1 "2.2u" H 9220 4930 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 9200 5000 50  0001 C CNN
F 3 "" H 9200 5000 50  0000 C CNN
F 4 "Murata" H -150 2300 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H -150 2300 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H 100 2300 60  0001 C CNN "Remarks"
	1    9200 5000
	1    0    0    -1  
$EndComp
$Comp
L Project:R R46
U 1 1 5B05A3BB
P 8100 5200
F 0 "R46" V 8030 5200 50  0000 C CNN
F 1 "56k" V 8170 5200 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8100 5200 50  0001 C CNN
F 3 "" H 8100 5200 50  0000 C CNN
F 4 "Yageo" H -150 2250 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0756KL" H -150 2250 50  0001 C CNN "PartNumber"
	1    8100 5200
	0    -1   1    0   
$EndComp
$Comp
L Transistor_BJT:BC817 T3
U 1 1 5B05A3A6
P 8500 5200
F 0 "T3" H 8700 5275 50  0000 L CNN
F 1 "MMBT3904" H 8700 5200 50  0000 L CNN
F 2 "LibreSolar:SOT-23" H 8700 5125 50  0001 L CIN
F 3 "" H 8500 5200 50  0001 L CNN
F 4 "Diodes Inc." H -150 2250 50  0001 C CNN "Manufacturer"
F 5 "MMBT3904-7-F" H -150 2250 50  0001 C CNN "PartNumber"
	1    8500 5200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR049
U 1 1 5B05A39E
P 7600 5500
F 0 "#PWR049" H 7600 5250 50  0001 C CNN
F 1 "GND" H 7600 5350 50  0000 C CNN
F 2 "" H 7600 5500 50  0000 C CNN
F 3 "" H 7600 5500 50  0000 C CNN
	1    7600 5500
	1    0    0    -1  
$EndComp
$Comp
L Project:R R38
U 1 1 5B05A397
P 7600 4700
F 0 "R38" V 7530 4700 50  0000 C CNN
F 1 "1M" V 7670 4700 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 7600 4700 50  0001 C CNN
F 3 "" H 7600 4700 50  0000 C CNN
F 4 "Yageo" H -50 2575 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-071ML" H -50 2575 50  0001 C CNN "PartNumber"
	1    7600 4700
	1    0    0    1   
$EndComp
$Comp
L Project:R R36
U 1 1 5B05A38E
P 8600 4400
F 0 "R36" V 8530 4400 50  0000 C CNN
F 1 "1M" V 8670 4400 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8600 4400 50  0001 C CNN
F 3 "" H 8600 4400 50  0000 C CNN
F 4 "Yageo" H -150 2325 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-071ML" H -150 2325 50  0001 C CNN "PartNumber"
	1    8600 4400
	1    0    0    1   
$EndComp
$Comp
L Project:R R44
U 1 1 5B05A385
P 8600 4800
F 0 "R44" V 8530 4800 50  0000 C CNN
F 1 "2.2k" V 8670 4800 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 8600 4800 50  0001 C CNN
F 3 "" H 8600 4800 50  0000 C CNN
F 4 "Yageo" H -150 2275 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-072K2L" H -150 2275 50  0001 C CNN "PartNumber"
	1    8600 4800
	1    0    0    1   
$EndComp
$Comp
L Project:C C40
U 1 1 5B05A37C
P 7200 5200
F 0 "C40" H 7220 5270 50  0000 L CNN
F 1 "100n" H 7220 5130 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 7200 5200 50  0001 C CNN
F 3 "" H 7200 5200 50  0000 C CNN
F 4 "Yageo" H -50 2300 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H -50 2300 50  0001 C CNN "PartNumber"
	1    7200 5200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR032
U 1 1 5B05A374
P 7200 5500
F 0 "#PWR032" H 7200 5250 50  0001 C CNN
F 1 "GND" H 7200 5350 50  0000 C CNN
F 2 "" H 7200 5500 50  0000 C CNN
F 3 "" H 7200 5500 50  0000 C CNN
	1    7200 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	8600 5400 8600 5500
$Comp
L power:GND #PWR050
U 1 1 5B05A3AD
P 8600 5500
F 0 "#PWR050" H 8600 5250 50  0001 C CNN
F 1 "GND" H 8600 5350 50  0000 C CNN
F 2 "" H 8600 5500 50  0000 C CNN
F 3 "" H 8600 5500 50  0000 C CNN
	1    8600 5500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR051
U 1 1 5B05A3B3
P 9200 5500
F 0 "#PWR051" H 9200 5250 50  0001 C CNN
F 1 "GND" H 9200 5350 50  0000 C CNN
F 2 "" H 9200 5500 50  0000 C CNN
F 3 "" H 9200 5500 50  0000 C CNN
	1    9200 5500
	1    0    0    -1  
$EndComp
Wire Wire Line
	9200 5100 9200 5500
Wire Wire Line
	8600 4200 8600 4300
Wire Wire Line
	2200 4300 1800 4300
Text Notes 4900 950  0    50   ~ 0
Alternative crystal: \nAbracon ABM3B-8.000MHZ-B2-T or\nTXC 7B-8.000MAAJ-T
$Comp
L power:GND #PWR0119
U 1 1 5B184888
P 6800 3600
F 0 "#PWR0119" H 6800 3350 50  0001 C CNN
F 1 "GND" H 6800 3450 50  0000 C CNN
F 2 "" H 6800 3600 50  0000 C CNN
F 3 "" H 6800 3600 50  0000 C CNN
	1    6800 3600
	1    0    0    -1  
$EndComp
$Comp
L Project:R R37
U 1 1 5B184890
P 6800 3100
F 0 "R37" V 6730 3100 50  0000 C CNN
F 1 "470" V 6870 3100 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 6800 3100 50  0001 C CNN
F 3 "" H 6800 3100 50  0000 C CNN
F 4 "Yageo" H -3500 -1800 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07470RL" H -3500 -1800 50  0001 C CNN "PartNumber"
	1    6800 3100
	1    0    0    1   
$EndComp
$Comp
L Project:D_LED LED3
U 1 1 5B184898
P 6800 3400
F 0 "LED3" H 6925 3450 50  0000 L CNN
F 1 "LED_green" H 6925 3350 50  0000 L CNN
F 2 "LED_SMD:LED_0603_1608Metric" V 6800 3400 50  0001 C CNN
F 3 "" V 6800 3400 50  0000 C CNN
F 4 "Lite-On" H 6800 3400 60  0001 C CNN "Manufacturer"
F 5 "LTST-C190GKT" H 6800 3400 60  0001 C CNN "PartNumber"
	1    6800 3400
	1    0    0    -1  
$EndComp
Text Label 6800 2700 3    50   ~ 0
LED3
Wire Wire Line
	6800 3000 6800 2700
Wire Wire Line
	6800 3200 6800 3300
Wire Wire Line
	6800 3500 6800 3600
Text Label 4400 3900 2    50   ~ 0
LED3
Wire Wire Line
	4000 3900 4400 3900
Wire Wire Line
	4000 2100 4500 2100
Wire Wire Line
	4000 2200 4500 2200
Text HLabel 4500 2100 2    50   Output ~ 0
USB_PWR_EN
Text HLabel 4500 2200 2    50   Input ~ 0
USB_PWR_FLG
$EndSCHEMATC
