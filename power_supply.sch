EESchema Schematic File Version 4
LIBS:mppt-10a-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 4 4
Title "10A MPPT Charge Controller with USB"
Date "2018-08-23"
Rev "0.4"
Comp "Libre Solar"
Comment1 "Author: Martin JÃ¤ger"
Comment2 "Website: http://libre.solar"
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:GND #PWR036
U 1 1 58C300D5
P 9700 5700
F 0 "#PWR036" H 9700 5450 50  0001 C CNN
F 1 "GND" H 9700 5550 50  0000 C CNN
F 2 "" H 9700 5700 50  0000 C CNN
F 3 "" H 9700 5700 50  0000 C CNN
	1    9700 5700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR037
U 1 1 58C300DB
P 9300 5700
F 0 "#PWR037" H 9300 5450 50  0001 C CNN
F 1 "GND" H 9300 5550 50  0000 C CNN
F 2 "" H 9300 5700 50  0000 C CNN
F 3 "" H 9300 5700 50  0000 C CNN
	1    9300 5700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR038
U 1 1 58C300E7
P 8000 5700
F 0 "#PWR038" H 8000 5450 50  0001 C CNN
F 1 "GND" H 8000 5550 50  0000 C CNN
F 2 "" H 8000 5700 50  0000 C CNN
F 3 "" H 8000 5700 50  0000 C CNN
	1    8000 5700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR039
U 1 1 58C300ED
P 8500 2900
F 0 "#PWR039" H 8500 2650 50  0001 C CNN
F 1 "GND" H 8500 2750 50  0000 C CNN
F 2 "" H 8500 2900 50  0000 C CNN
F 3 "" H 8500 2900 50  0000 C CNN
	1    8500 2900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR040
U 1 1 58C300F3
P 8200 2900
F 0 "#PWR040" H 8200 2650 50  0001 C CNN
F 1 "GND" H 8200 2750 50  0000 C CNN
F 2 "" H 8200 2900 50  0000 C CNN
F 3 "" H 8200 2900 50  0000 C CNN
	1    8200 2900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR041
U 1 1 58C300F9
P 7800 2900
F 0 "#PWR041" H 7800 2650 50  0001 C CNN
F 1 "GND" H 7800 2750 50  0000 C CNN
F 2 "" H 7800 2900 50  0000 C CNN
F 3 "" H 7800 2900 50  0000 C CNN
	1    7800 2900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR043
U 1 1 58C30106
P 5400 2600
F 0 "#PWR043" H 5400 2350 50  0001 C CNN
F 1 "GND" H 5400 2450 50  0000 C CNN
F 2 "" H 5400 2600 50  0000 C CNN
F 3 "" H 5400 2600 50  0000 C CNN
	1    5400 2600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR044
U 1 1 58C3010C
P 6300 2700
F 0 "#PWR044" H 6300 2450 50  0001 C CNN
F 1 "GND" H 6300 2550 50  0000 C CNN
F 2 "" H 6300 2700 50  0000 C CNN
F 3 "" H 6300 2700 50  0000 C CNN
	1    6300 2700
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR046
U 1 1 58C30118
P 9700 4850
F 0 "#PWR046" H 9700 4700 50  0001 C CNN
F 1 "+3.3V" H 9700 4990 50  0000 C CNN
F 2 "" H 9700 4850 50  0000 C CNN
F 3 "" H 9700 4850 50  0000 C CNN
	1    9700 4850
	1    0    0    -1  
$EndComp
$Comp
L Project:R R29
U 1 1 58C3011E
P 7800 2700
F 0 "R29" V 7725 2700 50  0000 C CNN
F 1 "24.9k" V 7875 2700 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" V 7625 2600 50  0001 C CNN
F 3 "" H 7800 2700 50  0000 C CNN
F 4 "Yageo" H 2100 -300 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0724K9L" H 2100 -300 50  0001 C CNN "PartNumber"
	1    7800 2700
	1    0    0    -1  
$EndComp
$Comp
L Project:C C23
U 1 1 58C30133
P 8000 5400
F 0 "C23" H 8025 5475 50  0000 L CNN
F 1 "2.2u" H 8025 5325 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 8000 5200 50  0001 C CNN
F 3 "" H 8025 5475 50  0000 C CNN
F 4 "Murata" H 0   2650 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H 0   2650 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H 2200 100 60  0001 C CNN "Remarks"
	1    8000 5400
	1    0    0    -1  
$EndComp
$Comp
L Project:C C21
U 1 1 58C3013A
P 8500 2600
F 0 "C21" H 8520 2670 50  0000 L CNN
F 1 "22u" H 8520 2530 50  0000 L CNN
F 2 "LibreSolar:C_1206_3216" H 8500 2600 50  0001 C CNN
F 3 "" H 8500 2600 50  0000 C CNN
F 4 "10V" H 8600 2450 50  0000 C CNN "Remarks"
F 5 "Samsung" H 0   0   50  0001 C CNN "Manufacturer"
F 6 "CL31B226MPHNNNE" H 0   0   50  0001 C CNN "PartNumber"
	1    8500 2600
	1    0    0    -1  
$EndComp
$Comp
L Project:C C20
U 1 1 58C30141
P 8200 2600
F 0 "C20" H 8220 2670 50  0000 L CNN
F 1 "22u" H 8220 2530 50  0000 L CNN
F 2 "LibreSolar:C_1206_3216" H 8200 2600 50  0001 C CNN
F 3 "" H 8200 2600 50  0000 C CNN
F 4 "10V" H 8300 2450 50  0000 C CNN "Remarks"
F 5 "Samsung" H 0   0   50  0001 C CNN "Manufacturer"
F 6 "CL31B226MPHNNNE" H 0   0   50  0001 C CNN "PartNumber"
	1    8200 2600
	1    0    0    -1  
$EndComp
$Comp
L Project:R R28
U 1 1 58C30148
P 7800 2300
F 0 "R28" V 7725 2300 50  0000 C CNN
F 1 "100k" V 7875 2300 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" V 7625 2200 50  0001 C CNN
F 3 "" H 7800 2300 50  0000 C CNN
F 4 "Yageo" H 2100 -300 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07100KL" H 2100 -300 50  0001 C CNN "PartNumber"
	1    7800 2300
	1    0    0    -1  
$EndComp
$Comp
L Project:C C19
U 1 1 58C30156
P 6950 1900
F 0 "C19" H 6970 1970 50  0000 L CNN
F 1 "100n" H 6970 1830 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 6950 1900 50  0001 C CNN
F 3 "" H 6950 1900 50  0000 C CNN
F 4 "Yageo" H 2300 -300 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 2300 -300 50  0001 C CNN "PartNumber"
	1    6950 1900
	0    -1   -1   0   
$EndComp
$Comp
L Project:C C14
U 1 1 58C3015D
P 3900 2200
F 0 "C14" H 3925 2275 50  0000 L CNN
F 1 "1u" H 3925 2125 50  0000 L CNN
F 2 "LibreSolar:C_0805_2012" H 3900 2000 50  0001 C CNN
F 3 "" H 3925 2275 50  0000 C CNN
F 4 "Yageo" H 1500 -550 50  0001 C CNN "Manufacturer"
F 5 "CC0805KKX7R9BB105" H 1500 -550 50  0001 C CNN "PartNumber"
	1    3900 2200
	1    0    0    -1  
$EndComp
$Comp
L Project:C C15
U 1 1 58C30164
P 4800 2200
F 0 "C15" H 4825 2275 50  0000 L CNN
F 1 "10u" H 4825 2125 50  0000 L CNN
F 2 "LibreSolar:C_1210_3225" H 4800 2000 50  0001 C CNN
F 3 "" H 4825 2275 50  0000 C CNN
F 4 "25V, X7R" H 700 -500 60  0001 C CNN "Remarks"
F 5 "Samsung" H 0   0   50  0001 C CNN "Manufacturer"
F 6 "CL31A106KAHNNNE" H 0   0   50  0001 C CNN "PartNumber"
	1    4800 2200
	1    0    0    -1  
$EndComp
$Comp
L Project:L L2
U 1 1 58C3016B
P 4200 1900
F 0 "L2" H 4200 1970 50  0000 C CNN
F 1 "2.2uH" H 4200 1850 50  0000 C CNN
F 2 "Inductor_SMD:L_1210_3225Metric" V 4200 1900 50  0001 C CNN
F 3 "" V 4200 1900 50  0000 C CNN
F 4 "Tayo Yuden" H 1500 -300 50  0001 C CNN "Manufacturer"
F 5 "BRL3225T2R2M" H 1500 -300 50  0001 C CNN "PartNumber"
	1    4200 1900
	1    0    0    -1  
$EndComp
$Comp
L Project:C C35
U 1 1 58C3017A
P 9300 5500
F 0 "C35" H 9325 5575 50  0000 L CNN
F 1 "100p" H 9325 5425 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 9300 5300 50  0001 C CNN
F 3 "" H 9325 5575 50  0000 C CNN
F 4 "Yageo" H -50 2700 50  0001 C CNN "Manufacturer"
F 5 "CC0603JRNPO9BN101" H -50 2700 50  0001 C CNN "PartNumber"
F 6 "NP0/C0G" H 850 100 50  0001 C CNN "Remarks"
	1    9300 5500
	1    0    0    -1  
$EndComp
$Comp
L Project:C C38
U 1 1 58C30181
P 9700 5400
F 0 "C38" H 9725 5475 50  0000 L CNN
F 1 "2.2u" H 9725 5325 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 9700 5200 50  0001 C CNN
F 3 "" H 9725 5475 50  0000 C CNN
F 4 "Murata" H -50 2600 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H -50 2600 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H 2200 100 60  0001 C CNN "Remarks"
	1    9700 5400
	1    0    0    -1  
$EndComp
$Comp
L Project:L L3
U 1 1 58C30191
P 7500 2100
F 0 "L3" H 7500 2170 50  0000 C CNN
F 1 "10uH" H 7500 2050 50  0000 C CNN
F 2 "LibreSolar:Bourns_SRN8040TA" V 7500 2100 50  0001 C CNN
F 3 "" V 7500 2100 50  0000 C CNN
F 4 "Tayo Yuden" H 7500 2100 60  0001 C CNN "Manufacturer"
F 5 "NR8040T100M" H 7500 2100 60  0001 C CNN "PartNumber"
F 6 "Bourns SRN8040TA-100M" H 7500 2100 60  0001 C CNN "Alternative"
	1    7500 2100
	1    0    0    -1  
$EndComp
$Comp
L Project:AP2210-3.3 U5
U 1 1 58BDC485
P 8800 5300
F 0 "U5" H 8800 5650 50  0000 C CNN
F 1 "AP2210-3.3" H 8800 4950 50  0000 C CNN
F 2 "LibreSolar:SOT-23-5" H 8800 4800 50  0001 C CNN
F 3 "" H 8800 5300 50  0000 C CNN
F 4 "Diodes Inc." H -50 2750 50  0001 C CNN "Manufacturer"
F 5 "AP2210K-3.3TRG1" H -50 2750 50  0001 C CNN "PartNumber"
F 6 "MIC5225" H 2200 100 60  0001 C CNN "Alternative"
	1    8800 5300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR047
U 1 1 58BDC73F
P 8300 5700
F 0 "#PWR047" H 8300 5450 50  0001 C CNN
F 1 "GND" H 8300 5550 50  0000 C CNN
F 2 "" H 8300 5700 50  0000 C CNN
F 3 "" H 8300 5700 50  0000 C CNN
	1    8300 5700
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG050
U 1 1 58BFEEDA
P 5400 1800
F 0 "#FLG050" H 5400 1875 50  0001 C CNN
F 1 "PWR_FLAG" H 5400 1950 50  0000 C CNN
F 2 "" H 5400 1800 50  0001 C CNN
F 3 "" H 5400 1800 50  0001 C CNN
	1    5400 1800
	1    0    0    -1  
$EndComp
Text Notes 8550 5950 0    50   ~ 0
Max current \noutput: 150mA
Wire Wire Line
	9200 5100 9700 5100
Wire Wire Line
	9700 4850 9700 5000
Wire Wire Line
	7600 2100 7800 2100
Wire Wire Line
	8000 5100 8300 5100
Wire Wire Line
	7800 2100 7800 2200
Wire Wire Line
	8200 2100 8200 2500
Wire Wire Line
	3900 1900 3900 2100
Wire Wire Line
	7800 2900 7800 2800
Wire Wire Line
	8200 2700 8200 2900
Wire Wire Line
	9700 5700 9700 5500
Wire Wire Line
	8000 5700 8000 5500
Wire Wire Line
	3900 2500 3900 2300
Wire Wire Line
	4800 2500 4800 2300
Wire Wire Line
	8500 2700 8500 2900
Wire Wire Line
	9300 5600 9300 5700
Wire Wire Line
	7800 2400 7800 2500
Wire Wire Line
	7050 1900 7200 1900
Wire Wire Line
	7200 1900 7200 2100
Wire Wire Line
	4300 1900 4500 1900
Wire Wire Line
	4800 2100 4800 1900
Wire Wire Line
	9200 5300 9300 5300
Wire Wire Line
	9300 5300 9300 5400
Wire Wire Line
	5400 1800 5400 1900
Connection ~ 9700 5100
Connection ~ 7800 2100
Connection ~ 3900 1900
Connection ~ 7800 2500
Connection ~ 7200 2100
Connection ~ 4800 1900
Connection ~ 8200 2100
Connection ~ 8000 5100
Connection ~ 5400 1900
Text Notes 4650 1250 0    100  ~ 0
Battery to 5V (SMPS)
Text Notes 8250 4400 0    100  ~ 0
5V to 3.3V (LDO)
Wire Wire Line
	8400 5300 8300 5300
Wire Wire Line
	8400 5500 8300 5500
Wire Wire Line
	8300 5500 8300 5700
Wire Wire Line
	8300 5300 8300 5100
Connection ~ 8300 5100
Wire Wire Line
	3600 1900 3900 1900
Text Notes 5100 7600 0    50   ~ 0
If not stated otherwise, all MLCC 50V X7R
Wire Wire Line
	9700 5100 9700 5300
Wire Wire Line
	7800 2100 8200 2100
Wire Wire Line
	3900 1900 4100 1900
Wire Wire Line
	7800 2500 7800 2600
Wire Wire Line
	7200 2100 7400 2100
Wire Wire Line
	8500 2100 8500 2500
Wire Wire Line
	8000 5100 8000 5300
Wire Wire Line
	5400 1900 5900 1900
Wire Wire Line
	8300 5100 8400 5100
$Comp
L power:+5V #PWR0107
U 1 1 5AF2023B
P 9100 1900
F 0 "#PWR0107" H 9100 1750 50  0001 C CNN
F 1 "+5V" H 9100 2040 50  0000 C CNN
F 2 "" H 9100 1900 50  0000 C CNN
F 3 "" H 9100 1900 50  0000 C CNN
	1    9100 1900
	1    0    0    -1  
$EndComp
Text Notes 7250 1300 0    50   ~ 0
Output voltage: 0.925 x (1+45.3/10) = 5.12 V
$Comp
L power:GND #PWR0108
U 1 1 5AF38C71
P 4150 6100
F 0 "#PWR0108" H 4150 5850 50  0001 C CNN
F 1 "GND" H 4150 5950 50  0000 C CNN
F 2 "" H 4150 6100 50  0000 C CNN
F 3 "" H 4150 6100 50  0000 C CNN
	1    4150 6100
	1    0    0    -1  
$EndComp
$Comp
L Project:C C25
U 1 1 5AF38C79
P 5300 6300
F 0 "C25" H 5325 6375 50  0000 L CNN
F 1 "100n" H 5325 6225 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5300 6100 50  0001 C CNN
F 3 "" H 5325 6375 50  0000 C CNN
F 4 "Yageo" H 2200 3200 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 2200 3200 50  0001 C CNN "PartNumber"
	1    5300 6300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0109
U 1 1 5AF38C80
P 5300 6500
F 0 "#PWR0109" H 5300 6250 50  0001 C CNN
F 1 "GND" H 5300 6350 50  0000 C CNN
F 2 "" H 5300 6500 50  0000 C CNN
F 3 "" H 5300 6500 50  0000 C CNN
	1    5300 6500
	1    0    0    -1  
$EndComp
Text Notes 2300 4600 0    100  ~ 0
USB connector and power supply
$Comp
L power:+5V #PWR0110
U 1 1 5AF38C89
P 2100 5000
F 0 "#PWR0110" H 2100 4850 50  0001 C CNN
F 1 "+5V" H 2100 5140 50  0000 C CNN
F 2 "" H 2100 5000 50  0000 C CNN
F 3 "" H 2100 5000 50  0000 C CNN
	1    2100 5000
	1    0    0    -1  
$EndComp
Wire Wire Line
	5300 6100 5300 6200
Wire Wire Line
	5300 6400 5300 6500
$Comp
L power:GND #PWR0111
U 1 1 5AF38C9C
P 5050 6500
F 0 "#PWR0111" H 5050 6250 50  0001 C CNN
F 1 "GND" H 5050 6350 50  0000 C CNN
F 2 "" H 5050 6500 50  0000 C CNN
F 3 "" H 5050 6500 50  0000 C CNN
	1    5050 6500
	1    0    0    -1  
$EndComp
$Comp
L Interface_USB:TPS2513 U8
U 1 1 5AF38CA2
P 2500 5800
F 0 "U8" H 2500 6225 50  0000 C CNN
F 1 "TPS2513" H 2500 6134 50  0000 C CNN
F 2 "LibreSolar:SOT-23-6" H 2500 5400 50  0001 C CNN
F 3 "http://www.ti.com/lit/ds/symlink/tps2513.pdf" H 2500 5850 50  0001 C CNN
F 4 "Texas Instruments" H 2500 5800 50  0001 C CNN "Manufacturer"
F 5 "TPS2513DBVR" H 2500 5800 50  0001 C CNN "PartNumber"
F 6 "+fastusb" H 2500 5800 50  0001 C CNN "Config"
F 7 "UC2632" H 2500 5800 50  0001 C CNN "Alternative"
F 8 "X" H 2500 5800 600 0000 C CNN "DNF"
	1    2500 5800
	1    0    0    -1  
$EndComp
$Comp
L Project:USB_A_stacked J5
U 1 1 5AF38CAC
P 5150 5500
F 0 "J5" H 5205 6167 50  0000 C CNN
F 1 "USB_A_stacked" H 5205 6076 50  0000 C CNN
F 2 "LibreSolar:USB_A_Wuerth_61400826021_Horizontal_Stacked" H 5250 5450 50  0001 C CNN
F 3 " ~" H 5250 5450 50  0001 C CNN
F 4 "CUI" H 5150 5500 50  0001 C CNN "Manufacturer"
F 5 "UJ2-ADH-1-TH" H 5150 5500 50  0001 C CNN "PartNumber"
F 6 "Wuerth 61400826021" H 5150 5500 50  0001 C CNN "Alternative"
	1    5150 5500
	-1   0    0    -1  
$EndComp
Wire Wire Line
	4800 5200 4700 5200
Wire Wire Line
	4800 5100 4700 5100
Wire Wire Line
	4700 5100 4700 5200
Wire Wire Line
	5150 6100 5150 6200
Wire Wire Line
	5150 6200 5050 6200
Wire Wire Line
	5050 6200 5050 6100
Wire Wire Line
	5050 6200 5050 6500
Connection ~ 5050 6200
$Comp
L Power_Protection:NUP4202 U4
U 1 1 5AF38CBE
P 4150 5600
F 0 "U4" H 4380 5646 50  0000 L CNN
F 1 "IP4220CZ6" H 4380 5555 50  0000 L CNN
F 2 "LibreSolar:SOT-23-6" H 4200 5675 50  0001 C CNN
F 3 "" H 4200 5675 50  0001 C CNN
F 4 "Nexperia" H 4150 5600 50  0001 C CNN "Manufacturer"
F 5 "IP4220CZ6" H 4150 5600 50  0001 C CNN "PartNumber"
F 6 "NUP4202" H 4150 5600 50  0001 C CNN "Alternative"
	1    4150 5600
	-1   0    0    -1  
$EndComp
Wire Wire Line
	4800 5350 4600 5350
Wire Wire Line
	4600 5350 4600 5200
Wire Wire Line
	4600 5200 4250 5200
Wire Wire Line
	4250 5200 4250 5400
Connection ~ 4250 5200
Wire Wire Line
	4800 5450 4500 5450
Wire Wire Line
	4500 5450 4500 5300
Wire Wire Line
	4500 5300 4050 5300
Wire Wire Line
	4050 5300 4050 5400
Connection ~ 4050 5300
Wire Wire Line
	4800 5600 4500 5600
Wire Wire Line
	4500 5600 4500 5900
Wire Wire Line
	4500 5900 4250 5900
Wire Wire Line
	4800 5700 4600 5700
Wire Wire Line
	4600 5700 4600 6000
Wire Wire Line
	4600 6000 4050 6000
Wire Wire Line
	4250 5800 4250 5900
Wire Wire Line
	4050 5800 4050 6000
Wire Wire Line
	4150 5800 4150 6100
Wire Wire Line
	4150 5400 4150 5100
Connection ~ 4150 5100
Connection ~ 4700 5100
$Comp
L power:GND #PWR0112
U 1 1 5AF38CFC
P 2100 6100
F 0 "#PWR0112" H 2100 5850 50  0001 C CNN
F 1 "GND" H 2100 5950 50  0000 C CNN
F 2 "" H 2100 6100 50  0000 C CNN
F 3 "" H 2100 6100 50  0000 C CNN
	1    2100 6100
	1    0    0    -1  
$EndComp
Wire Wire Line
	2200 6000 2100 6000
Wire Wire Line
	2100 6000 2100 6100
Wire Wire Line
	2100 5600 2200 5600
$Comp
L Project:C C24
U 1 1 5AF38D09
P 2100 5800
F 0 "C24" H 2125 5875 50  0000 L CNN
F 1 "100n" H 2125 5725 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2100 5600 50  0001 C CNN
F 3 "" H 2125 5875 50  0000 C CNN
F 4 "Yageo" H -1000 2700 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H -1000 2700 50  0001 C CNN "PartNumber"
F 6 "+fastusb" H 2100 5800 50  0001 C CNN "Config"
F 7 "X" H 2100 5800 150 0000 C CNN "DNF"
	1    2100 5800
	-1   0    0    -1  
$EndComp
Wire Wire Line
	2100 5600 2100 5700
Connection ~ 2100 5600
Wire Wire Line
	2100 5900 2100 6000
Connection ~ 2100 6000
$Comp
L LibreSolar:LMR33630 U9
U 1 1 5AF597E6
P 6300 2100
F 0 "U9" H 6300 2567 50  0000 C CNN
F 1 "LMR33630" H 6300 2476 50  0000 C CNN
F 2 "Package_SO:TI_SO-PowerPAD-8_ThermalVias" H 6350 1650 50  0001 L CIN
F 3 "" H 6300 2100 50  0001 C CNN
F 4 "Texas Instruments" H 400 -500 50  0001 C CNN "Manufacturer"
F 5 "LMR33630ADDA" H 400 -500 50  0001 C CNN "PartNumber"
F 6 "400 kHz version" H 0   0   50  0001 C CNN "Remarks"
	1    6300 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 1900 6850 1900
$Comp
L Project:C C26
U 1 1 5AF7BF7A
P 5700 2500
F 0 "C26" H 5720 2570 50  0000 L CNN
F 1 "100n" H 5720 2430 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5700 2500 50  0001 C CNN
F 3 "" H 5700 2500 50  0000 C CNN
F 4 "Yageo" H 1050 300 50  0001 C CNN "Manufacturer"
F 5 "CC0603KRX7R9BB104" H 1050 300 50  0001 C CNN "PartNumber"
	1    5700 2500
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR01
U 1 1 5AF7C0AD
P 5700 2700
F 0 "#PWR01" H 5700 2450 50  0001 C CNN
F 1 "GND" H 5700 2550 50  0000 C CNN
F 2 "" H 5700 2700 50  0000 C CNN
F 3 "" H 5700 2700 50  0000 C CNN
	1    5700 2700
	1    0    0    -1  
$EndComp
Wire Wire Line
	5900 2300 5700 2300
Wire Wire Line
	5700 2300 5700 2400
Wire Wire Line
	5700 2600 5700 2700
Wire Wire Line
	4250 5200 2900 5200
Connection ~ 4250 5900
Connection ~ 4050 6000
Wire Wire Line
	2900 5200 2900 5600
Wire Wire Line
	2900 5600 2800 5600
Wire Wire Line
	3000 5300 3000 5700
Wire Wire Line
	3000 5700 2800 5700
Wire Wire Line
	4050 5300 3000 5300
Wire Wire Line
	3600 1900 3600 1800
Text Notes 7250 1550 0    50   ~ 0
Layout for 2A output current\n(1x up to 1.5A fast charging USB port, one normal 500 mA port)
Wire Wire Line
	4150 5100 2100 5100
Wire Wire Line
	2100 5100 2100 5600
Wire Wire Line
	4150 5100 4700 5100
Text Notes 2500 6600 0    50   ~ 0
Fast charging only on top USB port\nBottom USB port for data connection
Text GLabel 5800 2000 0    50   Input ~ 0
USB_PWR_EN
Text GLabel 3550 5900 0    50   BiDi ~ 0
USB_DP
Text GLabel 3550 6000 0    50   BiDi ~ 0
USB_DM
$Comp
L Device:Q_NMOS_GSD Q5
U 1 1 5B76FD25
P 2500 2800
F 0 "Q5" V 2843 2800 50  0000 C CNN
F 1 "BSS138N" V 2752 2800 50  0000 C CNN
F 2 "LibreSolar:SOT-23" H 2700 2900 50  0001 C CNN
F 3 "" H 2500 2800 50  0001 C CNN
F 4 "ON Semiconductor" H 200 300 50  0001 C CNN "Manufacturer"
F 5 "BSS138LT1G" H 200 300 50  0001 C CNN "PartNumber"
F 6 "+gates10V" H 2500 2800 50  0001 C CNN "Config"
F 7 "X" V 2500 2800 300 0000 C CNN "DNP"
	1    2500 2800
	0    -1   -1   0   
$EndComp
$Comp
L power:+10V #PWR0119
U 1 1 5B76FEEC
P 2800 2000
F 0 "#PWR0119" H 2800 1850 50  0001 C CNN
F 1 "+10V" H 2815 2173 50  0000 C CNN
F 2 "" H 2800 2000 50  0001 C CNN
F 3 "" H 2800 2000 50  0001 C CNN
	1    2800 2000
	1    0    0    -1  
$EndComp
$Comp
L Project:R R31
U 1 1 5B77CD17
P 2200 2900
F 0 "R31" V 2275 2900 50  0000 C CNN
F 1 "10k" V 2100 2900 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" H 2200 2900 50  0001 C CNN
F 3 "" H 2200 2900 50  0001 C CNN
F 4 "Yageo" H 2200 2900 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-0710KL" H 2200 2900 50  0001 C CNN "PartNumber"
F 6 "+gates10V" H 2200 2900 50  0001 C CNN "Config"
F 7 "X" H 2200 2900 150 0000 C CNN "DNP"
	1    2200 2900
	-1   0    0    1   
$EndComp
$Comp
L Project:D_Zener D8
U 1 1 5B77CDFB
P 2200 3300
F 0 "D8" V 2154 3379 50  0000 L CNN
F 1 "11V" V 2245 3379 50  0000 L CNN
F 2 "LibreSolar:D_SOD-123" V 2291 3379 50  0001 L CNN
F 3 "" H 2200 3300 50  0000 C CNN
F 4 "Diodes Inc." H 2200 3300 50  0001 C CNN "Manufacturer"
F 5 "BZT52C12-7-F" H 2200 3300 50  0001 C CNN "PartNumber"
F 6 "+gates10V" H 2200 3300 50  0001 C CNN "Config"
F 7 "X" V 2200 3300 150 0000 C CNN "DNP"
	1    2200 3300
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0121
U 1 1 5B77CEBC
P 2200 3500
F 0 "#PWR0121" H 2200 3250 50  0001 C CNN
F 1 "GND" H 2200 3350 50  0000 C CNN
F 2 "" H 2200 3500 50  0000 C CNN
F 3 "" H 2200 3500 50  0000 C CNN
	1    2200 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	2300 2700 2200 2700
Connection ~ 2200 2700
Wire Wire Line
	2200 2700 2200 2800
Wire Wire Line
	2500 3000 2500 3100
Wire Wire Line
	2500 3100 2200 3100
Wire Wire Line
	2200 3100 2200 3000
Wire Wire Line
	2200 3100 2200 3200
Connection ~ 2200 3100
Wire Wire Line
	2200 3400 2200 3500
Wire Wire Line
	2700 2700 2800 2700
Wire Wire Line
	2800 2700 2800 2200
$Comp
L Project:C C22
U 1 1 5B7A6037
P 2800 3200
F 0 "C22" H 2825 3275 50  0000 L CNN
F 1 "2.2u" H 2825 3125 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 2800 3000 50  0001 C CNN
F 3 "" H 2825 3275 50  0000 C CNN
F 4 "Murata" H -5200 450 50  0001 C CNN "Manufacturer"
F 5 "GRM188R61E225KA12D" H -5200 450 50  0001 C CNN "PartNumber"
F 6 "25V, X5R" H -3000 -2100 60  0001 C CNN "Remarks"
F 7 "+gates10V" H 2800 3200 50  0001 C CNN "Config"
F 8 "X" H 2800 3200 150 0000 C CNN "DNP"
	1    2800 3200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0122
U 1 1 5B7A60DC
P 2800 3500
F 0 "#PWR0122" H 2800 3250 50  0001 C CNN
F 1 "GND" H 2800 3350 50  0000 C CNN
F 2 "" H 2800 3500 50  0000 C CNN
F 3 "" H 2800 3500 50  0000 C CNN
	1    2800 3500
	1    0    0    -1  
$EndComp
Connection ~ 2800 2700
Wire Wire Line
	2800 3300 2800 3500
$Comp
L Project:R R32
U 1 1 5B7B57C0
P 2500 2200
F 0 "R32" V 2425 2200 50  0000 C CNN
F 1 "4.7" V 2575 2200 50  0000 C CNN
F 2 "LibreSolar:R_0805_2012" V 2325 2100 50  0001 C CNN
F 3 "" H 2500 2200 50  0000 C CNN
F 4 "Yageo" H 2500 2200 50  0001 C CNN "Manufacturer"
F 5 "RC0805FR-074R7L" H 2500 2200 50  0001 C CNN "PartNumber"
F 6 "-gates" H 200 300 50  0001 C CNN "Config"
F 7 "X" V 2500 2200 150 0001 C CNN "DNP"
	1    2500 2200
	0    -1   1    0   
$EndComp
Text Notes 700  2700 0    50   ~ 0
Stuffing options for MOSFET\ndriver supply voltage:\n\n1. Direct supply via 12V (put R32)\n\n2. Source follower to generate\n10V from higher bat. voltage
Text GLabel 3600 1800 1    50   Input ~ 0
LOAD_S
Text GLabel 2200 2100 1    50   Input ~ 0
DCDC_OUT
Wire Wire Line
	2200 2100 2200 2200
Wire Wire Line
	2400 2200 2200 2200
Connection ~ 2200 2200
Wire Wire Line
	2200 2200 2200 2700
Wire Wire Line
	2600 2200 2800 2200
Connection ~ 2800 2200
Wire Wire Line
	2800 2200 2800 2000
$Comp
L Device:Q_PMOS_GSD Q6
U 1 1 5B796B03
P 7100 4500
F 0 "Q6" H 7305 4454 50  0000 L CNN
F 1 "DMP3099L-7" H 7305 4545 50  0000 L CNN
F 2 "LibreSolar:SOT-23" H 7300 4600 50  0001 C CNN
F 3 "~" H 7100 4500 50  0001 C CNN
F 4 "Diodes Inc." H 7100 4500 50  0001 C CNN "Manufacturer"
F 5 "DMP3099L-7" H 7100 4500 50  0001 C CNN "PartNumber"
F 6 "Higher current than standard BSS84 needed" H 7100 4500 50  0001 C CNN "Remarks"
	1    7100 4500
	1    0    0    1   
$EndComp
$Comp
L power:+10V #PWR048
U 1 1 5B79EAB4
P 7200 4000
F 0 "#PWR048" H 7200 3850 50  0001 C CNN
F 1 "+10V" H 7215 4173 50  0000 C CNN
F 2 "" H 7200 4000 50  0001 C CNN
F 3 "" H 7200 4000 50  0001 C CNN
	1    7200 4000
	1    0    0    -1  
$EndComp
Wire Wire Line
	7200 4100 7200 4300
Wire Wire Line
	6900 4500 6800 4500
$Comp
L power:+5V #PWR058
U 1 1 5B7C0115
P 8000 4600
F 0 "#PWR058" H 8000 4450 50  0001 C CNN
F 1 "+5V" H 8000 4740 50  0000 C CNN
F 2 "" H 8000 4600 50  0000 C CNN
F 3 "" H 8000 4600 50  0000 C CNN
	1    8000 4600
	1    0    0    -1  
$EndComp
$Comp
L Project:D D7
U 1 1 5B7D319C
P 8000 4800
F 0 "D7" H 8000 4900 50  0000 C CNN
F 1 "1N4148" H 8000 4700 50  0000 C CNN
F 2 "LibreSolar:D_SOD-123" V 8000 4800 50  0001 C CNN
F 3 "" V 8000 4800 50  0000 C CNN
F 4 "Diodes Inc." H 3950 2000 50  0001 C CNN "Manufacturer"
F 5 "1N4148W-7-F" H 3950 2000 50  0001 C CNN "PartNumber"
	1    8000 4800
	0    -1   -1   0   
$EndComp
Wire Wire Line
	8000 4600 8000 4700
Wire Wire Line
	8000 4900 8000 5000
Wire Wire Line
	8000 5000 7200 5000
Wire Wire Line
	7200 5000 7200 4700
Connection ~ 8000 5000
Wire Wire Line
	8000 5000 8000 5100
$Comp
L Project:R R12
U 1 1 5B81A500
P 6800 4300
F 0 "R12" V 6725 4300 50  0000 C CNN
F 1 "100k" V 6875 4300 50  0000 C CNN
F 2 "LibreSolar:R_0603_1608" V 6625 4200 50  0001 C CNN
F 3 "" H 6800 4300 50  0000 C CNN
F 4 "Yageo" H 1100 1700 50  0001 C CNN "Manufacturer"
F 5 "RC0603FR-07100KL" H 1100 1700 50  0001 C CNN "PartNumber"
	1    6800 4300
	-1   0    0    1   
$EndComp
Wire Wire Line
	6800 4100 6800 4200
Wire Wire Line
	6800 4100 7200 4100
Wire Wire Line
	6800 4400 6800 4500
$Comp
L Project:CP C2
U 1 1 5B93EBD6
P 4500 2200
F 0 "C2" H 4520 2270 50  0000 L CNN
F 1 "150u" H 4520 2120 50  0000 L CNN
F 2 "Capacitor_SMD:CP_Elec_8x6.2" H 4500 2200 50  0001 C CNN
F 3 "" H 4500 2200 50  0000 C CNN
F 4 "Panasonic" H 700 400 50  0001 C CNN "Manufacturer"
F 5 "EEEFK1E151P" H 700 400 50  0001 C CNN "PartNumber"
F 6 "25V" H -3500 -600 60  0001 C CNN "Remarks"
	1    4500 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	4500 2100 4500 1900
Connection ~ 4500 1900
Wire Wire Line
	4500 1900 4800 1900
Wire Wire Line
	4500 2300 4500 2500
$Comp
L Project:C C29
U 1 1 5B963091
P 5100 2200
F 0 "C29" H 5120 2270 50  0000 L CNN
F 1 "220n" H 5120 2130 50  0000 L CNN
F 2 "LibreSolar:C_0603_1608" H 5100 2200 50  0001 C CNN
F 3 "" H 5100 2200 50  0000 C CNN
F 4 "Murata" H 450 0   50  0001 C CNN "Manufacturer"
F 5 "GCM188R71E224KA55D" H 5100 2200 50  0001 C CNN "PartNumber"
F 6 "25V, X7R" H 5100 2200 50  0001 C CNN "Remarks"
	1    5100 2200
	1    0    0    -1  
$EndComp
Wire Wire Line
	6700 2100 7200 2100
Wire Wire Line
	6800 2500 6800 2400
Wire Wire Line
	6800 2400 6700 2400
Wire Wire Line
	6800 2500 7800 2500
Wire Wire Line
	6700 2300 7000 2300
Text Label 7000 2300 2    50   ~ 0
PG_5V
Wire Wire Line
	7200 4100 7200 4000
Connection ~ 7200 4100
Wire Wire Line
	8200 2100 8500 2100
Wire Wire Line
	6300 2600 6300 2700
Wire Wire Line
	4800 1900 5100 1900
Wire Wire Line
	5900 2000 5800 2000
Wire Wire Line
	5900 2100 5400 2100
Wire Wire Line
	5400 2100 5400 2500
Wire Wire Line
	5400 2500 5400 2600
Connection ~ 5400 2500
Wire Wire Line
	4800 2500 5100 2500
Wire Wire Line
	4800 2500 4500 2500
Connection ~ 4800 2500
Wire Wire Line
	4500 2500 3900 2500
Connection ~ 4500 2500
Wire Wire Line
	5100 2300 5100 2500
Connection ~ 5100 2500
Wire Wire Line
	5100 2500 5400 2500
Wire Wire Line
	5100 2100 5100 1900
Connection ~ 5100 1900
Wire Wire Line
	5100 1900 5400 1900
Wire Wire Line
	2100 5000 2100 5100
Connection ~ 2100 5100
Text Notes 6250 5250 0    50   ~ 0
Supply from 10V rail\nonly if 5V supply is \nnot good enough\n\n(maybe the gate\ncould be tied to\n5V for SMPS w/o PG)
$Comp
L Project:C C36
U 1 1 5BAA2E9F
P 8800 2600
F 0 "C36" H 8820 2670 50  0000 L CNN
F 1 "22u" H 8820 2530 50  0000 L CNN
F 2 "LibreSolar:C_1206_3216" H 8800 2600 50  0001 C CNN
F 3 "" H 8800 2600 50  0000 C CNN
F 4 "10V" H 8900 2450 50  0000 C CNN "Remarks"
F 5 "Samsung" H 0   0   50  0001 C CNN "Manufacturer"
F 6 "CL31B226MPHNNNE" H 0   0   50  0001 C CNN "PartNumber"
	1    8800 2600
	1    0    0    -1  
$EndComp
$Comp
L Project:C C40
U 1 1 5BAA2F45
P 9100 2600
F 0 "C40" H 9120 2670 50  0000 L CNN
F 1 "22u" H 9120 2530 50  0000 L CNN
F 2 "LibreSolar:C_1206_3216" H 9100 2600 50  0001 C CNN
F 3 "" H 9100 2600 50  0000 C CNN
F 4 "10V" H 9200 2450 50  0000 C CNN "Remarks"
F 5 "Samsung" H 0   0   50  0001 C CNN "Manufacturer"
F 6 "CL31B226MPHNNNE" H 0   0   50  0001 C CNN "PartNumber"
	1    9100 2600
	1    0    0    -1  
$EndComp
Wire Wire Line
	8500 2100 8800 2100
Wire Wire Line
	8800 2100 8800 2500
Connection ~ 8500 2100
Wire Wire Line
	8800 2100 9100 2100
Wire Wire Line
	9100 2100 9100 2500
Connection ~ 8800 2100
$Comp
L power:GND #PWR07
U 1 1 5BAB0592
P 8800 2900
F 0 "#PWR07" H 8800 2650 50  0001 C CNN
F 1 "GND" H 8800 2750 50  0000 C CNN
F 2 "" H 8800 2900 50  0000 C CNN
F 3 "" H 8800 2900 50  0000 C CNN
	1    8800 2900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR08
U 1 1 5BAB05E1
P 9100 2900
F 0 "#PWR08" H 9100 2650 50  0001 C CNN
F 1 "GND" H 9100 2750 50  0000 C CNN
F 2 "" H 9100 2900 50  0000 C CNN
F 3 "" H 9100 2900 50  0000 C CNN
	1    9100 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 2700 9100 2900
Wire Wire Line
	8800 2700 8800 2900
Wire Wire Line
	9100 1900 9100 2000
Connection ~ 9100 2100
Wire Wire Line
	3550 5900 4250 5900
Wire Wire Line
	3550 6000 4050 6000
NoConn ~ 2800 5900
NoConn ~ 2800 6000
$Comp
L Connector:Conn_01x02_Male J7
U 1 1 5B81B86B
P 9900 2700
F 0 "J7" H 10006 2878 50  0000 C CNN
F 1 "PWR_5V" H 10006 2787 50  0000 C CNN
F 2 "Connector_PinHeader_2.54mm:PinHeader_1x02_P2.54mm_Vertical" H 9900 2700 50  0001 C CNN
F 3 "~" H 9900 2700 50  0001 C CNN
	1    9900 2700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0124
U 1 1 5B81B872
P 10400 2900
F 0 "#PWR0124" H 10400 2650 50  0001 C CNN
F 1 "GND" H 10400 2750 50  0000 C CNN
F 2 "" H 10400 2900 50  0000 C CNN
F 3 "" H 10400 2900 50  0000 C CNN
	1    10400 2900
	1    0    0    -1  
$EndComp
Wire Wire Line
	10100 2700 10400 2700
Wire Wire Line
	10400 2700 10400 2600
Wire Wire Line
	10100 2800 10400 2800
Wire Wire Line
	10400 2800 10400 2900
$Comp
L power:+5V #PWR0130
U 1 1 5B821AC7
P 10400 2600
F 0 "#PWR0130" H 10400 2450 50  0001 C CNN
F 1 "+5V" H 10400 2740 50  0000 C CNN
F 2 "" H 10400 2600 50  0000 C CNN
F 3 "" H 10400 2600 50  0000 C CNN
	1    10400 2600
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint_Probe TP9
U 1 1 5B8F000B
P 9900 5000
F 0 "TP9" H 10053 5102 50  0000 L CNN
F 1 "Test_Point_Probe" H 10053 5011 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 10100 5000 50  0001 C CNN
F 3 "~" H 10100 5000 50  0001 C CNN
F 4 "+info" H 0   -200 50  0001 C CNN "Config"
	1    9900 5000
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint_Probe TP8
U 1 1 5B8F625D
P 3000 2900
F 0 "TP8" H 3153 3002 50  0000 L CNN
F 1 "Test_Point_Probe" H 3153 2911 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 3200 2900 50  0001 C CNN
F 3 "~" H 3200 2900 50  0001 C CNN
F 4 "+info" H 200 300 50  0001 C CNN "Config"
	1    3000 2900
	1    0    0    -1  
$EndComp
$Comp
L Connector:TestPoint_Probe TP7
U 1 1 5B8F6473
P 9300 2000
F 0 "TP7" H 9453 2102 50  0000 L CNN
F 1 "Test_Point_Probe" H 9453 2011 50  0000 L CNN
F 2 "TestPoint:TestPoint_Pad_D1.0mm" H 9500 2000 50  0001 C CNN
F 3 "~" H 9500 2000 50  0001 C CNN
F 4 "+info" H 0   0   50  0001 C CNN "Config"
	1    9300 2000
	1    0    0    -1  
$EndComp
Wire Wire Line
	9300 2000 9100 2000
Connection ~ 9100 2000
Wire Wire Line
	9100 2000 9100 2100
Wire Wire Line
	3000 2900 2800 2900
Connection ~ 2800 2900
Wire Wire Line
	2800 2900 2800 3100
Wire Wire Line
	2800 2700 2800 2900
Wire Wire Line
	9900 5000 9700 5000
Connection ~ 9700 5000
Wire Wire Line
	9700 5000 9700 5100
Text Notes 700  3600 0    50   ~ 0
Test results TP8 using 11V zener:\n- 9.28 V with MOSFET driver on \n  (50 kHz)\n- 9.62 V with MOSFET driver off\n\n--> 12V zener might be better
Wire Wire Line
	7000 2300 7000 3200
Wire Wire Line
	7000 3200 6400 3200
Wire Wire Line
	6400 3200 6400 4500
Wire Wire Line
	6400 4500 6800 4500
Connection ~ 6800 4500
$EndSCHEMATC
